<html xmlns:v="urn:schemas-microsoft-com:vml"xmlns:o="urn:schemas-microsoft-com:office:office"xmlns:w="urn:schemas-microsoft-com:office:word"xmlns="http://www.w3.org/TR/REC-html40"><head><meta name=Titre content=5><meta name="Mots clés" content=""><meta http-equiv=Content-Type content="text/html; charset=macintosh"><meta name=ProgId content=Word.Document><meta name=Generator content="Microsoft Word 11"><meta name=Originator content="Microsoft Word 11"><link rel=File-List href="05_fichiers/filelist.xml"><link rel=Edit-Time-Data href="05_fichiers/editdata.mso"><!--[if !mso]><style>v\:* {behavior:url(#default#VML);}o\:* {behavior:url(#default#VML);}w\:* {behavior:url(#default#VML);}.shape {behavior:url(#default#VML);}</style><![endif]--><title>5</title><!--[if gte mso 9]><xml> <o:DocumentProperties>  <o:Template>Normal</o:Template>  <o:LastAuthor>Catherine Recanati</o:LastAuthor>  <o:Revision>2</o:Revision>  <o:TotalTime>0</o:TotalTime>  <o:Created>2009-02-02T16:51:00Z</o:Created>  <o:LastSaved>2009-02-02T16:51:00Z</o:LastSaved>  <o:Pages>2</o:Pages>  <o:Words>8285</o:Words>  <o:Characters>47230</o:Characters>  <o:Lines>393</o:Lines>  <o:Paragraphs>94</o:Paragraphs>  <o:CharactersWithSpaces>58001</o:CharactersWithSpaces>  <o:Version>11.0</o:Version> </o:DocumentProperties> <o:OfficeDocumentSettings>  <o:AllowPNG/> </o:OfficeDocumentSettings></xml><![endif]--><!--[if gte mso 9]><xml> <w:WordDocument>  <w:PrintFractionalCharacterWidth/>  <w:HyphenationZone>0</w:HyphenationZone>  <w:DoNotHyphenateCaps/>  <w:DrawingGridHorizontalSpacing>6 pt</w:DrawingGridHorizontalSpacing>  <w:DrawingGridVerticalSpacing>6 pt</w:DrawingGridVerticalSpacing>  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>  <w:DisplayVerticalDrawingGridEvery>0</w:DisplayVerticalDrawingGridEvery>  <w:UseMarginsForDrawingGridOrigin/>  <w:DoNotShadeFormData/>  <w:Compatibility>   <w:OrigWordTableRules/>   <w:NoLeading/>   <w:SpaceForUL/>   <w:BalanceSingleByteDoubleByteWidth/>   <w:DoNotLeaveBackslashAlone/>   <w:ULTrailSpace/>   <w:DoNotExpandShiftReturn/>   <w:SpacingInWholePoints/>   <w:ShowBreaksInFrames/>   <w:SuppressTopSpacing/>   <w:SuppressTopSpacingMac5/>   <w:MWSmallCaps/>   <w:UsePrinterMetrics/>   <w:WW6BorderRules/>   <w:FootnoteLayoutLikeWW8/>   <w:ShapeLayoutLikeWW8/>   <w:AlignTablesRowByRow/>   <w:ForgetLastTabAlignment/>   <w:DoNotUseHTMLParagraphAutoSpacing/>   <w:LayoutRawTableWidth/>   <w:LayoutTableRowsApart/>   <w:UseWord97LineBreakingRules/>  </w:Compatibility> </w:WordDocument></xml><![endif]--><style><!-- /* Font Definitions */@font-face	{font-family:"Times New Roman";	panose-1:0 2 2 6 3 5 4 5 2 3;	mso-font-charset:0;	mso-generic-font-family:auto;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:Arial;	panose-1:0 2 11 6 4 2 2 2 2 2;	mso-font-charset:0;	mso-generic-font-family:auto;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:"Courier New";	panose-1:0 2 7 3 9 2 2 5 2 4;	mso-font-charset:77;	mso-generic-font-family:modern;	mso-font-format:other;	mso-font-pitch:fixed;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:Geneva;	panose-1:0 2 11 5 3 3 4 4 4 2;	mso-font-charset:77;	mso-generic-font-family:swiss;	mso-font-format:other;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:"Tms Rmn";	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:roman;	mso-font-format:other;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:Helv;	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:swiss;	mso-font-format:other;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:"MS Serif";	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:roman;	mso-font-format:other;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:"MS Sans Serif";	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:swiss;	mso-font-format:other;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:"New York";	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:roman;	mso-font-format:other;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:System;	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:swiss;	mso-font-format:other;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:Wingdings;	panose-1:0 5 2 1 2 1 8 4 8 7;	mso-font-charset:2;	mso-generic-font-family:auto;	mso-font-pitch:variable;	mso-font-signature:0 0 256 0 -2147483648 0;}@font-face	{font-family:"\FF2D\FF33 \660E\671D";	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:128;	mso-generic-font-family:roman;	mso-font-format:other;	mso-font-pitch:fixed;	mso-font-signature:16777216 0 117702657 0 131072 0;}@font-face	{font-family:\BC14\D0D5;	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:129;	mso-generic-font-family:auto;	mso-font-format:other;	mso-font-pitch:fixed;	mso-font-signature:16777216 0 103022593 0 524288 0;}@font-face	{font-family:\5B8B\4F53;	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:134;	mso-generic-font-family:auto;	mso-font-format:other;	mso-font-pitch:variable;	mso-font-signature:16777216 0 235143169 0 262144 0;}@font-face	{font-family:\65B0\7D30\660E\9AD4;	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:136;	mso-generic-font-family:auto;	mso-font-format:other;	mso-font-pitch:variable;	mso-font-signature:16777216 0 134479873 0 1048576 0;}@font-face	{font-family:"\FF2D\FF33 \30B4\30B7\30C3\30AF";	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:128;	mso-generic-font-family:modern;	mso-font-format:other;	mso-font-pitch:fixed;	mso-font-signature:16777216 0 117702657 0 131072 0;}@font-face	{font-family:Century;	panose-1:0 2 4 6 4 5 5 5 2 3;	mso-font-charset:77;	mso-generic-font-family:roman;	mso-font-format:other;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:Verdana;	panose-1:0 2 11 6 4 3 5 4 4 2;	mso-font-charset:77;	mso-generic-font-family:roman;	mso-font-format:other;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:Tahoma;	panose-1:0 2 11 6 4 3 5 4 4 2;	mso-font-charset:0;	mso-generic-font-family:auto;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:"Monotype Sorts";	panose-1:0 1 1 6 1 1 1 1 1 1;	mso-font-charset:2;	mso-generic-font-family:auto;	mso-font-pitch:variable;	mso-font-signature:0 0 256 0 -2147483648 0;}@font-face	{font-family:Chicago;	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:auto;	mso-font-format:other;	mso-font-pitch:auto;	mso-font-signature:0 0 0 0 0 0;}@font-face	{font-family:Monaco;	panose-1:0 2 0 5 0 0 0 0 0 0;	mso-font-charset:0;	mso-generic-font-family:auto;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:Venice;	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:auto;	mso-font-format:other;	mso-font-pitch:auto;	mso-font-signature:0 0 0 0 0 0;}@font-face	{font-family:London;	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:auto;	mso-font-format:other;	mso-font-pitch:auto;	mso-font-signature:0 0 0 0 0 0;}@font-face	{font-family:Athens;	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:auto;	mso-font-format:other;	mso-font-pitch:auto;	mso-font-signature:0 0 0 0 0 0;}@font-face	{font-family:"San Francisco";	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:auto;	mso-font-format:other;	mso-font-pitch:auto;	mso-font-signature:0 0 0 0 0 0;}@font-face	{font-family:Toronto;	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:auto;	mso-font-format:other;	mso-font-pitch:auto;	mso-font-signature:0 0 0 0 0 0;}@font-face	{font-family:Cairo;	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:auto;	mso-font-format:other;	mso-font-pitch:auto;	mso-font-signature:0 0 0 0 0 0;}@font-face	{font-family:"Los Angeles";	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:auto;	mso-font-format:other;	mso-font-pitch:auto;	mso-font-signature:0 0 0 0 0 0;}@font-face	{font-family:"Zapf Dingbats";	panose-1:0 5 2 1 2 1 7 4 2 6;	mso-font-charset:2;	mso-generic-font-family:auto;	mso-font-pitch:variable;	mso-font-signature:0 0 256 0 -2147483648 0;}@font-face	{font-family:Bookman;	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:auto;	mso-font-format:other;	mso-font-pitch:auto;	mso-font-signature:0 0 0 0 0 0;}@font-face	{font-family:"Helvetica Narrow";	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:auto;	mso-font-format:other;	mso-font-pitch:auto;	mso-font-signature:0 0 0 0 0 0;}@font-face	{font-family:Palatino;	panose-1:0 2 0 5 0 0 0 0 0 0;	mso-font-charset:0;	mso-generic-font-family:auto;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:"Zapf Chancery";	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:auto;	mso-font-format:other;	mso-font-pitch:auto;	mso-font-signature:0 0 0 0 0 0;}@font-face	{font-family:Mobile;	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:auto;	mso-font-format:other;	mso-font-pitch:auto;	mso-font-signature:0 0 0 0 0 0;}@font-face	{font-family:"Avant Garde";	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:auto;	mso-font-format:other;	mso-font-pitch:auto;	mso-font-signature:0 0 0 0 0 0;}@font-face	{font-family:"New Century Schoolbook";	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:77;	mso-generic-font-family:auto;	mso-font-format:other;	mso-font-pitch:auto;	mso-font-signature:0 0 0 0 0 0;} /* Style Definitions */p.MsoNormal, li.MsoNormal, div.MsoNormal	{mso-style-parent:"";	margin:0cm;	margin-bottom:.0001pt;	text-align:justify;	line-height:12.0pt;	mso-pagination:widow-orphan;	font-size:10.0pt;	font-family:Times;}h1	{mso-style-next:Normal;	margin-top:24.0pt;	margin-right:0cm;	margin-bottom:32.0pt;	margin-left:0cm;	text-align:right;	mso-pagination:widow-orphan;	mso-outline-level:1;	font-size:18.0pt;	font-family:Times;	mso-font-kerning:0pt;}h2	{mso-style-next:Normal;	margin-top:6.0pt;	margin-right:0cm;	margin-bottom:18.0pt;	margin-left:0cm;	text-align:justify;	mso-pagination:widow-orphan lines-together;	page-break-after:avoid;	mso-outline-level:2;	font-size:14.0pt;	font-family:Times;}h3	{mso-style-next:Normal;	margin:0cm;	margin-bottom:.0001pt;	text-align:justify;	line-height:12.0pt;	mso-pagination:widow-orphan;	mso-outline-level:3;	font-size:12.0pt;	font-family:Times;}h4	{mso-style-next:Normal;	margin-top:24.0pt;	margin-right:0cm;	margin-bottom:12.0pt;	margin-left:0cm;	text-align:justify;	line-height:20.0pt;	mso-pagination:widow-orphan;	page-break-after:avoid;	mso-outline-level:4;	font-size:10.0pt;	font-family:Times;}h5	{mso-style-next:Normal;	margin-top:24.0pt;	margin-right:0cm;	margin-bottom:12.0pt;	margin-left:0cm;	text-align:justify;	line-height:20.0pt;	mso-pagination:widow-orphan;	page-break-after:avoid;	mso-outline-level:5;	font-size:10.0pt;	font-family:Times;}h6	{mso-style-next:Normal;	margin-top:3.0pt;	margin-right:57.45pt;	margin-bottom:0cm;	margin-left:35.45pt;	margin-bottom:.0001pt;	text-align:justify;	line-height:12.0pt;	mso-pagination:widow-orphan;	mso-outline-level:6;	tab-stops:15.0pt 42.0pt 79.0pt 102.0pt;	font-size:10.0pt;	font-family:Times;	text-decoration:underline;	text-underline:single;}p.MsoIndex1, li.MsoIndex1, div.MsoIndex1	{mso-style-next:Normal;	margin:0cm;	margin-bottom:.0001pt;	text-align:justify;	line-height:12.0pt;	mso-pagination:widow-orphan;	font-size:10.0pt;	font-family:Times;}p.MsoIndex2, li.MsoIndex2, div.MsoIndex2	{mso-style-next:Normal;	margin-top:0cm;	margin-right:0cm;	margin-bottom:0cm;	margin-left:14.15pt;	margin-bottom:.0001pt;	text-align:justify;	line-height:12.0pt;	mso-pagination:widow-orphan;	font-size:10.0pt;	font-family:Times;}p.MsoToc1, li.MsoToc1, div.MsoToc1	{mso-style-next:Normal;	margin-top:0cm;	margin-right:42.5pt;	margin-bottom:0cm;	margin-left:0cm;	margin-bottom:.0001pt;	text-align:justify;	mso-pagination:widow-orphan;	tab-stops:right dotted 425.2pt;	font-size:10.0pt;	font-family:"New York";}p.MsoToc2, li.MsoToc2, div.MsoToc2	{mso-style-next:Normal;	margin-top:0cm;	margin-right:42.5pt;	margin-bottom:0cm;	margin-left:35.45pt;	margin-bottom:.0001pt;	text-align:justify;	line-height:12.0pt;	mso-pagination:widow-orphan;	tab-stops:dotted 432.3pt right blank 16.0cm;	font-size:10.0pt;	font-family:Times;}p.MsoToc3, li.MsoToc3, div.MsoToc3	{mso-style-next:Normal;	margin-top:0cm;	margin-right:42.5pt;	margin-bottom:0cm;	margin-left:41.0pt;	margin-bottom:.0001pt;	text-align:justify;	line-height:13.0pt;	mso-pagination:widow-orphan;	tab-stops:15.0pt 42.0pt 79.0pt 102.0pt right dotted 425.2pt;	font-size:10.0pt;	font-family:Times;}p.MsoToc4, li.MsoToc4, div.MsoToc4	{mso-style-parent:"TM 1";	mso-style-next:Normal;	margin-top:3.0pt;	margin-right:0cm;	margin-bottom:0cm;	margin-left:42.55pt;	margin-bottom:.0001pt;	line-height:12.0pt;	mso-pagination:widow-orphan;	tab-stops:right dotted 425.2pt;	font-size:10.0pt;	font-family:Times;	font-weight:bold;}p.MsoToc5, li.MsoToc5, div.MsoToc5	{mso-style-parent:"TM 1";	mso-style-next:Normal;	margin-top:3.0pt;	margin-right:0cm;	margin-bottom:0cm;	margin-left:2.0cm;	margin-bottom:.0001pt;	mso-pagination:widow-orphan;	tab-stops:right dotted 425.2pt;	font-size:10.0pt;	font-family:Times;	font-weight:bold;}p.MsoToc6, li.MsoToc6, div.MsoToc6	{mso-style-next:Normal;	margin-top:0cm;	margin-right:71.65pt;	margin-bottom:0cm;	margin-left:171.0pt;	margin-bottom:.0001pt;	text-align:justify;	line-height:13.0pt;	mso-pagination:widow-orphan;	tab-stops:15.0pt 42.0pt right dotted 426.0pt;	font-size:10.0pt;	font-family:Times;}p.MsoFootnoteText, li.MsoFootnoteText, div.MsoFootnoteText	{margin:0cm;	margin-bottom:.0001pt;	text-align:justify;	line-height:11.0pt;	mso-pagination:widow-orphan;	font-size:9.0pt;	font-family:Times;}p.MsoHeader, li.MsoHeader, div.MsoHeader	{margin-top:0cm;	margin-right:0cm;	margin-bottom:28.0pt;	margin-left:0cm;	text-align:justify;	line-height:12.0pt;	mso-pagination:widow-orphan;	border:none;	mso-border-bottom-alt:solid windowtext .75pt;	padding:0cm;	mso-padding-alt:0cm 0cm 0cm 0cm;	font-size:10.0pt;	font-family:Times;	font-style:italic;}p.MsoFooter, li.MsoFooter, div.MsoFooter	{margin:0cm;	margin-bottom:.0001pt;	text-align:justify;	line-height:12.0pt;	mso-pagination:widow-orphan;	tab-stops:center 240.95pt right 453.55pt;	font-size:10.0pt;	font-family:Times;}span.MsoFootnoteReference	{font-size:8.0pt;	mso-text-raise:3.0pt;}span.MsoEndnoteReference	{vertical-align:super;}table.MsoNormalTable	{mso-style-parent:"";	font-size:10.0pt;	font-family:"New York";}p.indent, li.indent, div.indent	{mso-style-name:indent;	margin-top:0cm;	margin-right:30.9pt;	margin-bottom:0cm;	margin-left:14.15pt;	margin-bottom:.0001pt;	text-align:justify;	line-height:12.0pt;	mso-pagination:widow-orphan;	font-size:10.0pt;	font-family:Times;}p.program, li.program, div.program	{mso-style-name:program;	margin-top:0cm;	margin-right:1.0pt;	margin-bottom:0cm;	margin-left:15.0pt;	margin-bottom:.0001pt;	line-height:12.0pt;	mso-pagination:widow-orphan;	font-size:10.0pt;	font-family:Courier;}p.indente, li.indente, div.indente	{mso-style-name:indente;	margin-top:0cm;	margin-right:0cm;	margin-bottom:0cm;	margin-left:28.0pt;	margin-bottom:.0001pt;	text-align:justify;	text-indent:-13.0pt;	line-height:12.0pt;	mso-pagination:widow-orphan;	font-size:10.0pt;	font-family:Times;}p.event, li.event, div.event	{mso-style-name:event;	margin:0cm;	margin-bottom:.0001pt;	text-align:justify;	mso-pagination:widow-orphan;	page-break-after:avoid;	tab-stops:center 222.0pt right 352.0pt;	font-size:10.0pt;	font-family:"New York";	font-weight:bold;}p.typewriter, li.typewriter, div.typewriter	{mso-style-name:typewriter;	margin:0cm;	margin-bottom:.0001pt;	text-align:justify;	mso-pagination:widow-orphan lines-together;	font-size:10.0pt;	font-family:Courier;}p.section, li.section, div.section	{mso-style-name:section;	margin:0cm;	margin-bottom:.0001pt;	line-height:12.0pt;	mso-pagination:widow-orphan;	font-size:10.0pt;	font-family:Geneva;	font-weight:bold;}p.Tdm4, li.Tdm4, div.Tdm4	{mso-style-name:Tdm4;	mso-style-parent:"TM 1";	margin-top:3.0pt;	margin-right:42.5pt;	margin-bottom:0cm;	margin-left:0cm;	margin-bottom:.0001pt;	mso-pagination:widow-orphan;	tab-stops:right dotted 425.2pt;	font-size:10.0pt;	font-family:Times;	font-weight:bold;}p.CteCteDroitCCD, li.CteCteDroitCCD, div.CteCteDroitCCD	{mso-style-name:"CôteàCôteDroit\.CàCD";	margin-top:0cm;	margin-right:-6.0pt;	margin-bottom:0cm;	margin-left:439.0pt;	margin-bottom:.0001pt;	line-height:9.0pt;	mso-pagination:widow-orphan;	tab-stops:15.0pt 42.0pt 79.0pt 102.0pt;	font-size:9.0pt;	font-family:Times;}p.CteCteGaucheCCG, li.CteCteGaucheCCG, div.CteCteGaucheCCG	{mso-style-name:"CôteàCôteGauche\.CàCG";	margin-top:0cm;	margin-right:68.0pt;	margin-bottom:0cm;	margin-left:0cm;	margin-bottom:.0001pt;	text-align:justify;	line-height:13.0pt;	mso-pagination:widow-orphan;	tab-stops:15.0pt 42.0pt 79.0pt 102.0pt;	font-size:10.0pt;	font-family:Times;}p.figure, li.figure, div.figure	{mso-style-name:figure;	margin:0cm;	margin-bottom:.0001pt;	text-align:center;	line-height:12.0pt;	mso-pagination:widow-orphan lines-together;	page-break-after:avoid;	font-size:10.0pt;	font-family:Times;}p.Xlib, li.Xlib, div.Xlib	{mso-style-name:Xlib;	margin-top:0cm;	margin-right:16.9pt;	margin-bottom:0cm;	margin-left:0cm;	margin-bottom:.0001pt;	text-align:justify;	line-height:18.0pt;	mso-pagination:widow-orphan;	font-size:10.0pt;	font-family:Helvetica;}p.attributs, li.attributs, div.attributs	{mso-style-name:attributs;	margin-top:0cm;	margin-right:0cm;	margin-bottom:0cm;	margin-left:107.0pt;	margin-bottom:.0001pt;	text-align:justify;	text-indent:-69.0pt;	line-height:12.0pt;	mso-pagination:widow-orphan;	font-size:10.0pt;	font-family:Times;}p.Attr, li.Attr, div.Attr	{mso-style-name:Attr;	mso-style-parent:attributs;	margin-top:0cm;	margin-right:0cm;	margin-bottom:0cm;	margin-left:177.0pt;	margin-bottom:.0001pt;	text-align:justify;	text-indent:-138.0pt;	line-height:12.0pt;	mso-pagination:widow-orphan;	font-size:10.0pt;	font-family:Times;}p.Prog, li.Prog, div.Prog	{mso-style-name:Prog;	margin:0cm;	margin-bottom:.0001pt;	mso-pagination:widow-orphan;	tab-stops:14.0pt 28.0pt 42.0pt 56.0pt 70.0pt 85.0pt 99.0pt 113.0pt 127.0pt 140.0pt 155.0pt 171.0pt 184.0pt 198.0pt 212.0pt 226.0pt 240.0pt 256.0pt 269.0pt 283.0pt 297.0pt 311.0pt 324.0pt 341.0pt;	font-size:10.0pt;	font-family:Times;}p.fonction, li.fonction, div.fonction	{mso-style-name:fonction;	margin-top:0cm;	margin-right:0cm;	margin-bottom:0cm;	margin-left:15.0pt;	margin-bottom:.0001pt;	text-align:justify;	line-height:12.0pt;	mso-pagination:widow-orphan;	font-size:10.0pt;	font-family:Times;}p.structure, li.structure, div.structure	{mso-style-name:structure;	margin-top:0cm;	margin-right:13.0pt;	margin-bottom:0cm;	margin-left:15.0pt;	margin-bottom:.0001pt;	line-height:12.0pt;	mso-pagination:widow-orphan;	border:none;	mso-border-alt:dotted windowtext .75pt;	padding:0cm;	mso-padding-alt:0cm 0cm 0cm 0cm;	font-size:10.0pt;	font-family:Times;}p.AttrLarger, li.AttrLarger, div.AttrLarger	{mso-style-name:AttrLarger;	mso-style-parent:Attr;	margin-top:0cm;	margin-right:0cm;	margin-bottom:0cm;	margin-left:151.0pt;	margin-bottom:.0001pt;	text-align:justify;	text-indent:-112.0pt;	line-height:12.0pt;	mso-pagination:widow-orphan;	font-size:10.0pt;	font-family:Times;}p.p1, li.p1, div.p1	{mso-style-name:p1;	margin-top:0cm;	margin-right:57.45pt;	margin-bottom:0cm;	margin-left:0cm;	margin-bottom:.0001pt;	text-align:justify;	line-height:13.0pt;	mso-pagination:widow-orphan;	tab-stops:15.0pt 42.0pt 79.0pt 102.0pt;	font-size:13.0pt;	font-family:Times;}p.hairline, li.hairline, div.hairline	{mso-style-name:hairline;	mso-style-parent:En-tête;	margin-top:0cm;	margin-right:0cm;	margin-bottom:28.0pt;	margin-left:0cm;	text-align:justify;	line-height:12.0pt;	mso-pagination:widow-orphan;	border:none;	mso-border-bottom-alt:solid windowtext .25pt;	padding:0cm;	mso-padding-alt:0cm 0cm 0cm 0cm;	font-size:10.0pt;	font-family:Times;	font-style:italic;}p.resume, li.resume, div.resume	{mso-style-name:resume;	mso-style-parent:fonction;	margin-top:0cm;	margin-right:0cm;	margin-bottom:0cm;	margin-left:15.0pt;	margin-bottom:.0001pt;	text-align:justify;	line-height:12.0pt;	mso-pagination:widow-orphan;	border:none;	mso-border-left-alt:double windowtext 2.25pt;	mso-border-right-alt:double windowtext 2.25pt;	padding:0cm;	mso-padding-alt:0cm 0cm 0cm 0cm;	font-size:10.0pt;	font-family:Times;} /* Page Definitions */@page	{mso-mirror-margins:yes;	mso-page-border-surround-header:no;	mso-page-border-surround-footer:no;	mso-facing-pages:yes;	mso-footnote-numbering-restart:each-page;}@page Section1	{size:594.0pt 841.0pt;	margin:190.0pt 113.0pt 156.0pt 128.0pt;	mso-header-margin:146.95pt;	mso-footer-margin:136.25pt;	mso-page-numbers:89;	mso-title-page:yes;	mso-even-header:url(":05_fichiers:header.htm") eh1;	mso-header:url(":05_fichiers:header.htm") h1;	mso-paper-source:0;}div.Section1	{page:Section1;}--></style></head><body bgcolor=white lang=FR style='tab-interval:35.0pt'><div class=Section1><p class=MsoNormal style='mso-pagination:none'><b><u><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></u></b></p><p class=MsoNormal style='mso-pagination:none'><b><u><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></u></b></p><p class=MsoNormal align=right style='text-align:right;mso-pagination:none'><spanstyle='font-size:24.0pt'><b>5<o:p></o:p></b></span></p><h1 style='mso-pagination:none'><span style='font-size:24.0pt'>La souris et leclavier<o:p></o:p></span></h1><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Dansce chapitre nous allons détailler tous les événements concernant la souris etle clavier.</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Souris:mouvements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><h2 style='mso-pagination:lines-together'>5.1.&nbsp;La saisie des événementsclavier et souris</h2><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Clavier&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Souris:saisie des événements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Nousavons vu dans le chapitre précédent que pour recevoir un événement il fallaiten avoir fait la demande auprès du serveur en <i>sélectionnant cet événement </i><spanstyle='font-style:normal'>sur une fenêtre. En réalité cette condition n'est passuffisante pour les événements sur les dispositifs d’entrée. Comme nous l'avonsdéjà énoncé dans le chapitre précédent, </span><i>une seule fenêtre, à uninstant donné, recevra les événements concernant le clavier, et une seulefenêtre (pas nécessairement la même), recevra les événements de mouvements etboutons de souris</i><span style='font-style:normal'>.</span></p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Clavier:voir aussi KeyPress&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Eneffet, les dispositifs d'entrée sont partagés par toutes les applicationstournant à l'écran mais ne concernent à un instant donné qu'une seule fenêtre.Par exemple, l’enfoncement d’une touche du clavier opéré par l’utilisateur neconcerne à un instant donné qu’une seule application. </p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Leproblème de la destination des actions de l'utilisateur sur le clavier et lasouris est résolu à l’aide d’un certain nombre de règles. La propagation desévénements (gouvernée par les attributs <span style='font-family:Courier'>event_mask</span>et <span style='font-family:Courier'>do_not_propagate_mask</span> des fenêtres)est l'une de ces règles, mais il y a d'autres notions qui interviennent, quenous allons détailler dans ce chapitre. Dans cette première section, nousallons d'abord décrire le comportement par défaut du système, tout enintroduisant deux notions fondamentales permettant de comprendre l'attributiondes dispositifs d'entrée.</p><h3 style='mso-pagination:none'>Le focus du clavier</h3><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;focus du clavier&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><b><o:p></o:p></b></p><p class=MsoNormal style='mso-pagination:none'><!--[if gte vml 1]><v:shapetype id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f"> <v:stroke joinstyle="miter"/> <v:formulas>  <v:f eqn="if lineDrawn pixelLineWidth 0"/>  <v:f eqn="sum @0 1 0"/>  <v:f eqn="sum 0 0 @1"/>  <v:f eqn="prod @2 1 2"/>  <v:f eqn="prod @3 21600 pixelWidth"/>  <v:f eqn="prod @3 21600 pixelHeight"/>  <v:f eqn="sum @0 0 1"/>  <v:f eqn="prod @6 1 2"/>  <v:f eqn="prod @7 21600 pixelWidth"/>  <v:f eqn="sum @8 21600 0"/>  <v:f eqn="prod @7 21600 pixelHeight"/>  <v:f eqn="sum @10 21600 0"/> </v:formulas> <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/> <o:lock v:ext="edit" aspectratio="t"/></v:shapetype><v:shape id="_x0000_i1025" type="#_x0000_t75" style='width:40pt; height:24pt'> <v:imagedata src="05_fichiers/image001.gif" o:althref="05_fichiers/image002.pct"  o:title=""/></v:shape><![endif]--><![if !vml]><img width=40 height=24src="05_fichiers/image003.png" v:shapes="_x0000_i1025"><![endif]>La fenêtrerecevant les entrées des touches du clavier est dite <i>avoir le focus du clavier</i><astyle='mso-footnote-id:ftn1' href="#_ftn1" name="_ftnref1" title=""><spanclass=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[1]<![endif]></span></span></a>.<spanstyle="mso-spacerun: yes">&nbsp; </span>La convention par défaut du système estque c'est la fenêtre racine qui a le focus. Une fenêtre qui a le focus en faitbénéficier ses descendantes et il s'ensuit que c'est la fenêtre située sous lecurseur de souris qui bénéficie par défaut du focus du clavier. </p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Clavier:saisie des événements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Concernantle focus, les <i>window manager</i><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><i><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;window manager&quot; </i><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle="mso-spacerun: yes">&nbsp;</span>mettent en œuvre deux conventions&nbsp;:la convention par défaut,<span style="mso-spacerun: yes">&nbsp; </span>selonlaquelle la fenêtre ayant le focus est la fenêtre située sous le pointeur desouris, et une deuxième convention, selon laquelle c'est l'utilisateur quidétermine le focus en cliquant préalablement sur la fenêtre concernée ou sur sabannière. Pour implanter cette deuxième convention, les <i>window</i><spanstyle='font-style:normal'> </span><i>manager</i><span style='font-style:normal'>utilisent la fonction </span><span style='font-family:Courier'>XSetInputFocus</span>qui permet d’attribuer le focus du clavier à une fenêtre autre que la racine. </p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=fonction style='mso-pagination:none'><span style='font-family:Courier'>XSetInputFocus</span><!--[if supportFields]><span style='display:none'><span style='mso-element:field-begin'></span><span style="mso-spacerun: yes">&nbsp;</span>XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;XSetInputFocus</span><span style='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->(dpy,focus_win, revert_to, time)</p><p class=fonction style='mso-pagination:none'>Display*<span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>dpy ;</p><p class=fonction style='mso-pagination:none'>Window<span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>focus_win, revert_to ;</p><p class=fonction style='mso-pagination:none'>Time<span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>time ;</p><p class=fonction style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle='font-family:Courier'>XSetInputFocus</span> attribue le focus à lafenêtre <i>focus_win</i><span style='font-style:normal'>. Il s’ensuit que seulecette fenêtre et ses descendantes pourront ensuite recevoir les événements </span><spanstyle='font-family:Courier'>KeyPress</span> et <span style='font-family:Courier'>KeyRelease</span>.La fenêtre qui reçoit le focus doit être visible, sinon une erreur de type <spanstyle='font-family:Courier'>BadMatch</span> est générée au moment del'exécution de la requête. </p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Onpeut passer pour <i>focus_win</i><span style='font-style:normal'> unidentificateur de fenêtre ou les constantes </span><span style='font-family:Courier'>PointerRoot</span> (pour désigner la racine <!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;racine &quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->contenantle pointeur à ce moment) ou <span style='font-family:Courier'>None</span> pourannihiler tout événement sur le clavier jusqu'au prochain changement de focus.L'argument <i>revert_to</i><span style='font-style:normal'> indique vers quellefenêtre rediriger le focus si la fenêtre accaparante devenait invisible. Onpeut indiquer l'une des constantes </span><span style='font-family:Courier'>RevertToParent</span>,<span style='font-family:Courier'>RevertToPointerRoot</span> ou <spanstyle='font-family:Courier'>RevertToNone</span>. Cet argument n'est consultéque si l'on a passé un véritable identificateur de fenêtre (sinon, on aurapassé <span style='font-family:Courier'>PointerRoot</span> <!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;PointerRoot</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->ou<span style='font-family:Courier'>None</span>, et dans les deux cas, unchangement de focus ne pourra se produire que par un nouvel appel à <spanstyle='font-family:Courier'>XSetInputFocus</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;XSetInputFocus&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->).Quant à l'attribut <i>time</i><span style='font-style:normal'>, il précisequand le changement de focus doit prendre effet. On peut passer une estampilledu temps en millisecondes ou la constante </span><span style='font-family:Courier'>CurrentTime</span>.</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Unappel à <span style='font-family:Courier'>XSetInputFocus</span> génère l’envoid’événements de type <span style='font-family:Courier'>FocusIn</span> <!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;FocusIn</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->et<span style='font-family:Courier'>FocusOut</span> <!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;FocusOut</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->auxfenêtres acquérant et perdant respectivement le focus.</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h3 style='mso-pagination:none'>La saisie de la souris </h3><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Souris:saisie des événements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;mouvements de souris&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lafenêtre recevant les événements souris est par défaut la fenêtre située sous lepointeur de souris, sauf en cas de saisie du pointeur. </p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Onappelle <i>saisie</i><span style='font-style:normal'> (</span><i>grab </i><spanstyle='font-style:normal'>en anglais) la monopolisation</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;monopolisation&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle="mso-spacerun: yes">&nbsp;</span>d'un dispositif d'entrée par unefenêtre.<span style="mso-spacerun: yes">&nbsp; </span>En cas de saisie, lesévénements concernant le dispositif sont uniquement acheminés vers la fenêtreaccaparante. Autrement dit, les autres fenêtres ne peuvent plus recevoird'événement concernant ce dispositif, et c'est pourquoi l'on dit que ledispositif a été saisi. Contrairement à ce que l'on pourrait croire, les cas desaisie sont fréquents car le système déclenche automatiquement une saisie dupointeur sur l'occurrence d'un événement de type <span style='font-family:Courier'>ButtonPress</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;ButtonPress&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->.Entre deux événements de type <span style='font-family:Courier'>ButtonPress</span>et <span style='font-family:Courier'>ButtonRelease</span> les événements sourissont acheminés <i>uniquement pour la fenêtre ayant sélectionné </i><spanstyle='font-style:normal'>l’enfoncement de bouton, et ce, jusqu’à ce que </span><i>tousles boutons</i><span style='font-style:normal'> de la souris soient relâchés.On parle dans ce cas de </span><i>saisie automatique</i><span style='font-style:normal'> du pointeur.</span></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><!--[if gte vml 1]><v:shape id="_x0000_i1026" type="#_x0000_t75" style='width:40pt;height:24pt'> <v:imagedata src="05_fichiers/image001.gif" o:althref="05_fichiers/image004.pct"  o:title=""/></v:shape><![endif]--><![if !vml]><img width=40 height=24src="05_fichiers/image005.png" v:shapes="_x0000_i1026"><![endif]>En cas desaisie, la fenêtre recevant les événements souris n’est plus nécessairementcelle dans laquelle se trouve le pointeur. En effet, c'est la fenêtre qui areçu l'événement <span style='font-family:Courier'>ButtonPress</span> quireçoit alors les événements souris, même si le pointeur sort de cette fenêtre.En outre, aucune autre fenêtre ne reçoit plus d’événement souris, même si lafenêtre accaparante n'en a pas sélectionné d'autre.</p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Saisie:automatique&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lesrègles que nous venons d'énoncer décrivent le comportement par défaut dusystème. En réalité, tout client peut sortir de ces conventions et demander auserveur la saisie d'un dispositif d'entrée ou la modification des paramètres dela saisie déclenchée automatiquement par le système sur l’événement <spanstyle='font-family:Courier'>ButtonPress</span>. Mais avant de détailler lesphénomènes de saisie, nous allons présenter les événements souris et donner unexemple simple de programmation.</p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;monopolisation&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h2 style='mso-pagination:lines-together'>5.2.&nbsp;ButtonPress, ButtonReleaseet MotionNotify</h2><table border=0 cellspacing=0 cellpadding=0 style='border-collapse:collapse; mso-table-layout-alt:fixed;mso-padding-alt:0cm 4.0pt 0cm 4.0pt'> <tr>  <td width=153 valign=top style='width:153.0pt;padding:0cm 4.0pt 0cm 4.0pt'>  <p class=AttrLarger style='margin-left:141.0pt;text-indent:-103.0pt;  mso-pagination:none'><span style='font-family:Courier'>ButtonPress</span><!--[if supportFields]><span  style='font-family:Courier'><span style='mso-element:field-begin'></span> XE <span  style="mso-spacerun: yes">&nbsp;</span>&quot;ButtonPress&quot; </span><![endif]--><!--[if supportFields]><span  style='font-family:Courier'><span style='mso-element:field-end'></span></span><![endif]--></p>  <p class=AttrLarger style='margin-left:141.0pt;text-indent:-103.0pt;  mso-pagination:none'><span style='font-family:Courier'>ButtonRelease</span><!--[if supportFields]><span  style='font-family:Courier'><span style='mso-element:field-begin'></span> XE <span  style="mso-spacerun: yes">&nbsp;</span>&quot;ButtonRelease&quot; </span><![endif]--><!--[if supportFields]><span  style='font-family:Courier'><span style='mso-element:field-end'></span></span><![endif]--></p>  </td>  <td width=207 valign=top style='width:207.0pt;padding:0cm 4.0pt 0cm 4.0pt'>  <p class=MsoNormal style='mso-pagination:none'>Ces événements sont envoyés si  un bouton de la souris est enfoncé ou relâché. On les sélectionne avec les  masques <span style='font-family:Courier'>ButtonPressMask </span><!--[if supportFields]><span  style='font-family:Courier;display:none'><span style='mso-element:field-begin'></span><span  style="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:  Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;ButtonPressMask &quot;  </span><![endif]--><!--[if supportFields]><span style='font-family:Courier;  display:none'><span style='mso-element:field-end'></span></span><![endif]-->et  <span style='font-family:Courier'>ButtonReleaseMask</span><!--[if supportFields]><span  style='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>  XE </span><span style='font-family:Courier'><span style="mso-spacerun:  yes">&nbsp;</span>&quot;ButtonReleaseMask&quot; </span><![endif]--><!--[if supportFields]><span  style='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->.  Ces événements sont envoyés à la fenêtre dans laquelle se trouvait la souris  au moment de l'enfoncement du bouton, sauf en cas d'appropriation de la  souris. Un événement de type <span style='font-family:Courier'>XButtonEvent</span>  <!--[if supportFields]><span style='font-family:Courier;display:none'><span  style='mso-element:field-begin'></span><span style="mso-spacerun:  yes">&nbsp;</span>XE </span><span style='font-family:Courier'><span  style="mso-spacerun: yes">&nbsp;</span>&quot;XButtonEvent</span> <span  style='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><span  style='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->contient  un champ <span style='font-family:Courier'>button</span> permettant de  connaître le numéro du bouton qui est enfoncé ou relâché.</p>  </td> </tr></table><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Focus&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Dispositif d’entrée:monopolisation\;.i.Focus\;&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Commenous l'avons déjà indiqué, l'enfoncement d'un bouton de souris déclencheautomatiquement une saisie de la souris par la fenêtre ayant sélectionné cetévénement. Cette fenêtre reçoit ensuite les événements souris qu'elle asélectionnés, quelque soit la position de la souris et jusqu'à ce que tous lesboutons soient relâchés. Durant toute cette période, les autres fenêtres nereçoivent plus d'événement souris. Pour prévenir l'utilisateur, le curseur desouris garde la forme qui lui était attribué dans la fenêtre accaparante, mêmes'il se trouve à l'extérieur. <!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-begin'></span><span style="mso-spacerun:yes">&nbsp;</span>XE </span><span style="mso-spacerun: yes">&nbsp;</span>&quot;appropriationdes dispositifs&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lesavantages de la saisie automatique sont nombreux. Sans ce mécanisme, il seraitimpossible de faire glisser un objet sur l'écran en l'entraînant avec la souris,car cet objet cesserait de recevoir les événements dès que la souris sortiraitde la fenêtre.<span style="mso-spacerun: yes">&nbsp; </span>Il y a cependantdes cas où ce comportement n'est pas avantageux pour l'application.</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Onpeut supprimer cette redirection des événements vers la fenêtre accaparante auniveau de l'application en ajoutant le masque <span style='font-family:Courier'>OwnerGrabButtonMask</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;OwnerGrabButtonMask&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]--><a style='mso-footnote-id:ftn2' href="#_ftn2" name="_ftnref2" title=""><span class=MsoFootnoteReference><spanstyle='mso-special-character:footnote'><![if !supportFootnotes]>[2]<![endif]></span></span></a>au masque de sélection de l'événement bouton. Dans ce cas, les événementssouris sont envoyés aux fenêtres de l'application se trouvant sous le curseurjusqu'à ce que la saisie prenne fin.<!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;Saisie&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lasaisie du pointeur reste cependant active dans les fenêtres des autres clients,et ces derniers ne reçoivent plus d'événement souris. L'intérêt de ce mécanismeest que l'application qui a sélectionné un événement de type <spanstyle='font-family:Courier'>ButtonPress</span> <!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;ButtonPress</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->esttoujours assurée de pouvoir récupérer l'événement <span style='font-family:Courier'>ButtonRelease</span> <!--[if supportFields]><span style='font-family:Courier;display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;ButtonRelease</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->correspondant,même s'il se produit dans la fenêtre d’un autre client. C’est pourquoi, lasaisie n’est pas entièrement désactivée par le masque <span style='font-family:Courier'>OwnerGrabButtonMask</span> et elle continue d'affecter les fenêtresdes autres clients.<span style='display:none'>i.Souris:saisie des événements;</span></p><h3 style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></h3><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Détaillonspour ces premiers événements, les champs accessibles dans la structure <spanstyle='font-family:Courier'>XButtonEvent</span> associée<a style='mso-footnote-id:ftn3' href="#_ftn3" name="_ftnref3" title=""><span class=MsoFootnoteReference><spanstyle='mso-special-character:footnote'><![if !supportFootnotes]>[3]<![endif]></span></span></a>.Une structure d'événement contient quel que soit son type les cinq champs de lastructure <span style='font-family:Courier'>XAnyEvent</span> que nous avonsdéjà commentés dans le chapitre précédent. On aura donc accès ici (comme pourn'importe quel type d'événement) aux champs <span style='font-family:Courier'>type</span>,<span style='font-family:Courier'>window</span>, <span style='font-family:Courier'>serial</span>,<span style='font-family:Courier'>display</span> et <span style='font-family:Courier'>send_event</span>. Les autres champs disponibles sont les suivants :</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=AttrLarger style='mso-pagination:none'>Window <span style='font-family:Courier'>root</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Cechamp indique la racine sur laquelle s'est produit l'événement.</p><p class=AttrLarger style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=AttrLarger style='mso-pagination:none'>Window <span style='font-family:Courier'>subwindow</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Cechamp indique la sous-fenêtre dans laquelle s'est produit l'événement quandelle diffère de la fenêtre qui l'a reçu (champ <span style='font-family:Courier'>window</span>).</p><p class=AttrLarger style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=AttrLarger style='mso-pagination:none'>Time <span style='font-family:Courier'>time</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lechamp <span style='font-family:Courier'>time</span> indique l'heure del'événement en millisecondes. Le type <span style='font-family:Courier'>Time</span>correspond en réalité au type <span style='font-family:Courier'>unsigned long. </span>Cechamp devient par conséquent faux quand sa valeur dépasse 32&nbsp;bits, ce quise produit environ tous les 49,7&nbsp;jours<a style='mso-footnote-id:ftn4'href="#_ftn4" name="_ftnref4" title=""><span class=MsoFootnoteReference><spanstyle='mso-special-character:footnote'><![if !supportFootnotes]>[4]<![endif]></span></span></a>.</p><p class=AttrLarger style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=AttrLarger style='mso-pagination:none'>int <span style='font-family:Courier'>x,y</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Leschamps <span style='font-family:Courier'>x</span> et <span style='font-family:Courier'>y</span> fournissent les coordonnées du pointeur au moment del'événement, relativement à la fenêtre ayant reçu l'événement (champ <spanstyle='font-family:Courier'>window</span>).</p><p class=AttrLarger style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=AttrLarger style='mso-pagination:none'>int <span style='font-family:Courier'>x_root, y_root</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Ceschamps fournissent les coordonnées du pointeur au moment de l'événementrelativement à la racine sur laquelle l'événement s'est produit (champ <spanstyle='font-family:Courier'>root</span>).</p><p class=AttrLarger style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=AttrLarger style='mso-pagination:none'>unsigned int <spanstyle='font-family:Courier'>state</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>L'entier<span style='font-family:Courier'>state</span> est un masque qui fournit l'étatdes modifieurs<a style='mso-footnote-id:ftn5' href="#_ftn5" name="_ftnref5"title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[5]<![endif]></span></span></a> et desboutons juste avant l'événement.<span style="mso-spacerun: yes">&nbsp;</span>On pourra tester le champ <span style='font-family:Courier'>state</span>grâce aux entiers symboliques énumérés figure 5.1. </p><p class=AttrLarger style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><div style='border:dotted windowtext .75pt;padding:6.0pt 6.0pt 6.0pt 6.0pt'><p class=program style='margin-top:0cm;margin-right:35.0pt;margin-bottom:0cm;margin-left:58.0pt;margin-bottom:.0001pt;line-height:normal;mso-pagination:none;tab-stops:157.0pt 249.0pt;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Mod1Mask<spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Button1Mask</p><p class=program style='margin-top:0cm;margin-right:35.0pt;margin-bottom:0cm;margin-left:58.0pt;margin-bottom:.0001pt;line-height:normal;mso-pagination:none;tab-stops:157.0pt 249.0pt;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'>ShiftMask<spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Mod2Mask<spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Button2Mask</p><p class=program style='margin-top:0cm;margin-right:35.0pt;margin-bottom:0cm;margin-left:58.0pt;margin-bottom:.0001pt;line-height:normal;mso-pagination:none;tab-stops:157.0pt 249.0pt;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'>LockMask<spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Mod3Mask<spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Button3Mask</p><p class=program style='margin-top:0cm;margin-right:35.0pt;margin-bottom:0cm;margin-left:58.0pt;margin-bottom:.0001pt;line-height:normal;mso-pagination:none;tab-stops:157.0pt 249.0pt;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'>ControlMask<spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Mod4Mask<spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Button4Mask</p><p class=program style='margin-top:0cm;margin-right:35.0pt;margin-bottom:0cm;margin-left:58.0pt;margin-bottom:.0001pt;line-height:normal;mso-pagination:none;tab-stops:157.0pt 249.0pt;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Mod5Mask<spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Button5Mask</p></div><p class=MsoNormal style='line-height:normal;mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal align=center style='text-align:center;mso-pagination:none'>fig.5.1. <i>Les masques d'état des boutons et modifieurs<o:p></o:p></i></p><p class=AttrLarger style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=AttrLarger style='mso-pagination:none'>unsigned int <spanstyle='font-family:Courier'>button</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Détailindiquant le numéro du bouton qui a été enfoncé ou relâché. Les valeurspossibles sont <span style='font-family:Courier'>Button1</span>, <spanstyle='font-family:Courier'>Button2</span>, etc. (à ne pas confondre avec lesmasques de la figure 5.1).</p><p class=AttrLarger style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=AttrLarger style='mso-pagination:none'>Bool <span style='font-family:Courier'>same_screen</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lebooléen <span style='font-family:Courier'>same_screen</span> indique si lepointeur est toujours sur le même écran. Ce champ sert dans les cas de saisiedu pointeur quand la souris peut changer d’écran.</p><p class=Attr style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Laplupart de ces champs sont également disponibles dans les événements demouvement de souris que nous allons décrire maintenant.</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h3 style='mso-pagination:none'>Les mouvements de souris</h3><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><table border=0 cellspacing=0 cellpadding=0 style='border-collapse:collapse; mso-table-layout-alt:fixed;mso-padding-alt:0cm 4.0pt 0cm 4.0pt'> <tr>  <td width=153 valign=top style='width:153.0pt;padding:0cm 4.0pt 0cm 4.0pt'>  <p class=AttrLarger style='margin-left:141.0pt;text-indent:-103.0pt;  mso-pagination:none'><span style='font-family:Courier'>MotionNotify</span> <!--[if supportFields]><span  style='mso-element:field-begin'></span><span style="mso-spacerun:  yes">&nbsp;</span>XE <span style='font-family:Courier'><span  style="mso-spacerun: yes">&nbsp;</span>&quot;MotionNotify</span> <span  style='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><span  style='mso-element:field-end'></span><![endif]--></p>  </td>  <td width=207 valign=top style='width:207.0pt;padding:0cm 4.0pt 0cm 4.0pt'>  <p class=AttrLarger style='margin-top:0cm;margin-right:4.0pt;margin-bottom:  0cm;margin-left:0cm;margin-bottom:.0001pt;text-indent:0cm;mso-pagination:  none'>La souris a bougé. Ce type d'événement est envoyé pour tous les  mouvements de souris&nbsp;; mais les mouvements de souris étant très  nombreux, on peut restreindre le nombre des événements envoyés en indiquant  des contraintes par des masques de sélection spécifiques.<span  style="mso-spacerun: yes">&nbsp; </span></p>  </td> </tr></table><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;mouvements de souris:voir MotionNotify&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Souris:mouvements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>Les masques permettant de sélectionnerdes mouvements souris sont <span style='font-family:Courier'>PointerMotionMask</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;PointerMotionMask&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->,<span style='font-family:Courier'>ButtonMotionMask</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;ButtonMotionMask&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle="mso-spacerun: yes">&nbsp;</span>et <span style='font-family:Courier'>Button&lt;n&gt;MotionMask</span>,où <span style='font-family:Courier'>n</span> est un entier compris entre 1 et5. Les mouvements ne seront tous envoyés que s'ils ont été sélectionnés avec <spanstyle='font-family:Courier'>PointerMotionMask</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;PointerMotionMask&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->.<spanstyle="mso-spacerun: yes">&nbsp; </span><span style='font-family:Courier'>ButtonMotionMask</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;ButtonMotionMask&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle="mso-spacerun: yes">&nbsp;</span>limite l'envoi des événements auxmouvements se produisant lorsqu'un bouton de souris est enfoncé. On peut mêmerestreindre encore l'envoi des événements à ceux se produisant lorsqu’un boutonparticulier de la souris est enfoncé, commele deuxième bouton avec <spanstyle='font-family:Courier'>Button2MotionMask</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;Button2MotionMask&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->.Ces masques de sélection peuvent être combinés entre eux.</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lastructure associée à un événement de type <span style='font-family:Courier'>MotionNotify</span><!--[if supportFields]><span style='font-family:Courier;display:none'><spanstyle='mso-element:field-begin'></span><span style="mso-spacerun:yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;MotionNotify</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->estde type <span style='font-family:Courier'>XMotionEvent</span> <!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;XMotionEvent</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->eton y accède via le membre <span style='font-family:Courier'>xmotion</span> del’union <span style='font-family:Courier'>XEvent</span>. Elle contient les cinqchamps de la structure <span style='font-family:Courier'>XAnyEvent</span> etles neufs champs que nous avons déjà commentés pour les événements <spanstyle='font-family:Courier'>ButtonPress</span> et <span style='font-family:Courier'>ButtonRelease</span>.<span style="mso-spacerun: yes">&nbsp; </span>Cesneufs champs supplémentaires sont en réalité communs à tous les événements surles entrées<span style="mso-spacerun: yes">&nbsp; </span>(i.e. aux événementsde type <span style='font-family:Courier'>ButtonPress</span>, <spanstyle='font-family:Courier'>ButtonRelease</span>, <span style='font-family:Courier'>KeyPress</span>, <span style='font-family:Courier'>KeyRelease</span><i>,</i><spanstyle='font-style:normal'> </span><span style='font-family:Courier'>MotionNotify</span><i>,</i><span style='font-family:Courier;font-style:normal'>EnterWindow</span><spanstyle="mso-spacerun: yes">&nbsp; </span>et <span style='font-family:Courier'>LeaveWindow</span>)et ont été regroupés figure 5.2.</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><div style='border:dotted windowtext .75pt;padding:6.0pt 6.0pt 6.0pt 6.0pt'><p class=structure style='mso-pagination:none;tab-stops:26.0pt right 337.0pt;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp; </span><spanstyle='font-family:Courier'>Window root;</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*racine sur laquelle l'ev.<span style="mso-spacerun: yes">&nbsp; </span>s'estproduit */</p><p class=structure style='mso-pagination:none;tab-stops:26.0pt right 337.0pt;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp; </span><spanstyle='font-family:Courier'>Window subwindow;</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*fenêtre fille où s'est produit l'ev.*/</p><p class=structure style='mso-pagination:none;tab-stops:26.0pt right 337.0pt;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp; </span><spanstyle='font-family:Courier'>Time time;</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*horaire en millisecondes */</p><p class=structure style='mso-pagination:none;tab-stops:26.0pt right 337.0pt;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp; </span><spanstyle='font-family:Courier'>int x, y;</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*coordonnés relatives à<span style="mso-spacerun: yes">&nbsp; </span>window */</p><p class=structure style='mso-pagination:none;tab-stops:26.0pt right 337.0pt;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp; </span><spanstyle='font-family:Courier'>int x_root, y_root;</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*coordonnés relatives à root */</p><p class=structure style='mso-pagination:none;tab-stops:26.0pt right 337.0pt;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp; </span><spanstyle='font-family:Courier'>unsigned int state; </span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp; </span>/* état des boutons et modifieurs (masque) */</p><p class=structure style='mso-pagination:none;tab-stops:26.0pt right 337.0pt;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp; </span><spanstyle='font-family:Courier'>Bool same_screen;</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*si le pointeur est sur le même écran*/</p></div><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal align=center style='text-align:center;mso-pagination:none'>fig.5.2. <i>Neuf champs communs aux événements d’entrée<o:p></o:p></i></p><p class=MsoNormal align=center style='text-align:center;mso-pagination:none'><i>(ensus de ceux communs à tous les événements)<o:p></o:p></i></p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Souris:mouvements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Enoutre, un champ supplémentaire <span style='font-family:Courier'><i>is_hint</i></span><spanstyle="mso-spacerun: yes">&nbsp; </span>(de type <span style='font-family:Courier'>char</span>)indique si l'événement <span style='font-family:Courier'>MotionNotify</span> aété envoyé normalement ou selon un mode spécial, préconisé par l'emploi dumasque <span style='font-family:Courier'>PointerMotionHintMask</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;PointerMotionHintMask&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->.</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h3 style='mso-pagination:none'>L'envoi de mouvements “synchronisés”</h3><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;mouvements de souris&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='display:none'>i.Souris:saisie des événements;</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;Souris:mouvements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lemasque <span style='font-family:Courier'>PointerMotionHintMask</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;PointerMotionHintMask&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->,(de l’anglais <i>Hint</i><span style='font-style:normal'>, indication, trace oupiste) permet de réduire l'envoi des événements de mouvement et de mieuxsynchroniser leur traitement par l'application. Ce masque ne sélectionne pas enlui&#8209;même<span style="mso-spacerun: yes">&nbsp; </span>de mouvement maispeut être utilisé en association avec les masques de sélection (restreint ounon) énumérés dans la section précédente. Le masque </span><spanstyle='font-family:Courier'>PointerMotionHintMask</span> <!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;PointerMotionHintMask</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->demandeen réalité l'envoi d’un seul événement de mouvement &#8212; un autre mouvementde souris n'étant envoyé à l’application <i>que si le client en réitèreexplicitement la demande</i><a style='mso-footnote-id:ftn6' href="#_ftn6"name="_ftnref6" title=""><span class=MsoFootnoteReference><spanstyle='mso-special-character:footnote'><![if !supportFootnotes]>[6]<![endif]></span></span></a><i>via un appel à</i><span style='font-style:normal'> </span><spanstyle='font-family:Courier'>XQueryPointer</span> <!--[if supportFields]><spanstyle='display:none'><i><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </i></span><span style='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;XQueryPointer</span><span style='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='display:none'><i><span style='mso-element:field-end'></span></i></span><![endif]--><i>ouà </i><span style='font-family:Courier;font-style:normal'>XGetMotionEvents</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;XGetMotionEvents&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->.</p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Souris:mouvements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;mouvements de souris&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Cemécanisme permet d’ignorer les mouvements qui se produisent pendant quel’application traite les événements de mouvement qu’elle reçoit. Sur réceptiond'un premier mouvement de souris, l’application peut traiter cet événement etappeler alors <span style='font-family:Courier'>XQueryPointer</span>. Cettefonction lui permet à la fois de récupérer la position actuelle de la souris etde resélectionner l’envoi d’un nouvel événement. La position du pointeur desouris qui est récupérée par <span style='font-family:Courier'>XQueryPointer</span>est plus récente que celle fournie par l'événement reçu et donc mieuxsynchronisée avec l’utilisateur. En outre, l’application demandant lesévénements un à un se trouve elle-même mieux synchronisée avec le serveur caron évite d'accumuler du retard en ayant trop d'événements de mouvement àtraiter. On utilisera cette technique pour optimiser le suivi de la sourischaque fois que les positions intermédiaires de la souris peuvent être ignorées<astyle='mso-footnote-id:ftn7' href="#_ftn7" name="_ftnref7" title=""><spanclass=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[7]<![endif]></span></span></a>.L’exemple développé dans la section suivante utilise cette technique. </p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>La fonction <span style='font-family:Courier'>XQueryPointer</span> prend les arguments suivants&nbsp;:</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=fonction style='mso-pagination:none'>Bool <span style='font-family:Courier'>XQueryPointer </span><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-begin'></span><span style="mso-spacerun:yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;XQueryPointer &quot; </span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->(dpy,<span style="mso-spacerun: yes">&nbsp; </span>win,<spanstyle="mso-spacerun: yes">&nbsp;&nbsp; </span>&amp;root_return,<spanstyle="mso-spacerun: yes">&nbsp;&nbsp; </span>&amp;child_return, <spanstyle='mso-tab-count:6'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&amp;root_x,&amp;root_y, &amp;win_x, &amp;win_y, &amp;state)</p><p class=fonction style='mso-pagination:none'>Display*<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>dpy;</p><p class=fonction style='mso-pagination:none'>Window<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>win,</p><p class=fonction style='mso-pagination:none'><span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>root_return,child_return;</p><p class=fonction style='mso-pagination:none'>int<span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>root_x_return,root_y_return ,win_x_return, win_y_return ;</p><p class=fonction style='mso-pagination:none'>unsigned int<spanstyle='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>state;</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Grossièrement,cette fonction permet de récupérer la position de la souris relativement à unefenêtre quelconque. L'argument <i>win</i><span style='font-style:normal'> estune fenêtre choisie par le programmeur, et qui servira d'origine pour rapporterla position actuelle de la souris (dans </span><i>win_x</i><spanstyle='font-style:normal'> et </span><i>win_y</i><span style='font-style:normal'>),sous réserve que la souris se trouve encore sur le même écran. Dans ce cas, lafonction retourne </span><span style='font-family:Courier'>True</span>. Sinon,la fonction retourne <span style='font-family:Courier'>False</span> mais permet(dans tous les cas) de récupérer la racine sur laquelle se trouve la souris(dans <i>root_return</i><span style='font-style:normal'>) et la position de lasouris relativement à la racine (dans </span><i>root_x</i><spanstyle='font-style:normal'> et </span><i>root_y</i><span style='font-style:normal'>).L'argument </span><i>child_return</i><span style='font-style:normal'> rapportel'identificateur de la fenêtre dans laquelle se trouve la souris et le masque </span><i>state</i><spanstyle='font-style:normal'> rapporte l'état des boutons et des modifieurs.</span></p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;mouvements de souris&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Souris:mouvements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h2 style='mso-pagination:lines-together'>5.3.&nbsp;Un exemple simple deprogrammation</h2><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Danscette section nous allons détailler la programmation d'une barre de défilement.La figure 5.3. donne quelques indications sur les noms des variables que l’onva utiliser. Pour matérialiser la barre de défilement, on va créer une fenêtrerectangulaire assez longue appelée <i>barre</i><span style='font-style:normal'>.Pour matérialiser l'ascenseur nous utiliserons une seconde fenêtre plus petiteque nous appellerons </span><i>tirette</i><span style='font-style:normal'>. Laseconde fenêtre étant toujours incluse dans la première, nous pourrons la créerfille de la première. </span></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal align=center style='text-align:center;mso-pagination:none'><!--[if gte vml 1]><v:shape id="_x0000_i1027" type="#_x0000_t75" style='width:255pt;height:201pt'> <v:imagedata src="05_fichiers/image006.gif" o:althref="05_fichiers/image007.pct"  o:title=""/></v:shape><![endif]--><![if !vml]><img width=255 height=201src="05_fichiers/image008.png" v:shapes="_x0000_i1027"><![endif]></p><p class=MsoNormal align=center style='text-align:center;mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal align=center style='text-align:center;mso-pagination:none'>fig.5.3. <i>La programmation d’une barre de défilement<o:p></o:p></i></p><p class=MsoNormal align=center style='text-align:center;mso-pagination:none'><i><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></i></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lescontraintes matérielles sont que les deux fenêtres aient toujours même hauteuret que la position en x de la tirette reste comprise entre <spanstyle='font-family:Courier'>0</span> et <span style='font-family:Courier'>LONGUEUR</span>moins<span style='font-family:Courier'> LARGEUR</span> pour que latirette ne sorte pas de la barre. </p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lesévénements à sélectionner dépendent du fonctionnement de la barre dedéfilement. Supposons ici que&nbsp;:</p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>•&nbsp;quandon clique dans la barre, le centre de la tirette est amené à l'endroit où l'onvient de cliquer.</p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>•&nbsp;quandon clique et que l’on tire la souris en maintenant le bouton enfoncé, latirette (c'est-à-dire son centre) suit le mouvement de la souris sur l'axe dela barre.</p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>•&nbsp;sion modifie la taille de la barre, la hauteur de la tirette s'adapte à celle dela barre mais sa largeur initiale reste constante.</p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Souris:mouvements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Ilrésulte de cette description que l'on doit sélectionner les événements <spanstyle='font-family:Courier'>ButtonPress</span> sur la barre pour capterl'enfoncement du bouton, et sélectionner les mouvements de souris avec lemasque <span style='font-family:Courier'>ButtonMotionMask</span> pour capterles mouvements qui se produisent quand un bouton de la souris est enfoncé. Ondoit également sélectionner les événements <span style='font-family:Courier'>ConfigureNotify</span>(à l'aide du masque <span style='font-family:Courier'>StructureNotifyMask</span>)sur la barre pour capter les changements de taille de la barre et réajuster lahauteur de la tirette en conséquence. On aurait pu sélectionner aussi lesévénements souris sur la tirette, mais cela n'est guère nécessaire ici du faitde la propagation des événements. Un événement qui se produit sur la tirettesera de toute façon propagé à la barre<a style='mso-footnote-id:ftn8'href="#_ftn8" name="_ftnref8" title=""><span class=MsoFootnoteReference><spanstyle='mso-special-character:footnote'><![if !supportFootnotes]>[8]<![endif]></span></span></a>.</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Pourréaliser un suivi rapide de la souris, on va demander à ne recevoir qu'unetrace des mouvements de souris. On utilisera donc le masque <spanstyle='font-family:Courier'>PointerMotionHintMask</span><i> </i><spanstyle='font-style:normal'>en combinaison avec </span><span style='font-family:Courier'>ButtonMotionMask</span><span style="mso-spacerun: yes">&nbsp;</span>pour sélectionner les mouvements. On fera ensuite appel à <spanstyle='font-family:Courier'>XQueryPointer</span> chaque fois qu'on recevra unévénement de mouvement pour récupérer la position actuelle de la souris etdemander l'envoi du prochain mouvement au serveur. Dans notre exemple, on peutconsidérer que notre dispositif d'affichage n'a qu'un écran et récupérer lescoordonnées du pointeur relativement à la barre avec <span style='font-family:Courier'>XQueryPointer</span> sans en tester la valeur de retour.<!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;mouvements de souris&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Avantde nous lancer dans la programmation, reste encore à se poser la questionsuivante<a style='mso-footnote-id:ftn9' href="#_ftn9" name="_ftnref9" title=""><spanclass=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[9]<![endif]></span></span></a><spanstyle='font-family:Courier'>&nbsp;</span>:&nbsp;Doit-on lever ou non la saisiede la souris déclenchée par l’événement <span style='font-family:Courier'>ButtonPress</span>? (Si oui, il suffit de rajouter le masque <span style='font-family:Courier'>OwnerGrabButtonMask</span><!--[if supportFields]><span style='font-family:Courier;display:none'><spanstyle='mso-element:field-begin'></span><span style="mso-spacerun:yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;OwnerGrabButtonMask</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->lorsde la sélection de l'enfoncement du bouton.<span style='display:none'>i.Souris:saisiedes événements;</span><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-begin'></span> XE </span><span style='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;OwnerGrabButtonMask:</span>voiraussi Saisie<span style='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->)</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Ici,la réponse est non. Au contraire, on se trouve dans un bon cas vis-à-vis ducomportement par défaut. Il est souhaitable en effet que les événements sourissoient toujours acheminés vers la barre, même si la souris sort de la fenêtre.Sinon, on ne recevra plus d'événement quand la souris quitterait un peu labarre, et cela pourrait gêner l'utilisateur si la barre est étroite. Parcontre, il faut faire bien attention à bloquer la tirette à l'intérieur de labarre.</p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Souris:mouvements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><span style="mso-spacerun:yes">&nbsp;</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Voicifinalement une programmation possible de cette barre de défilement, où l'onnote l'abscisse de la tirette relativement à la barre dans la variable <i>tire_x</i><spanstyle='font-style:normal'>, et l'abscisse de la souris relativement à la<spanstyle="mso-spacerun: yes">&nbsp; </span>barre dans </span><i>pt_x</i><spanstyle='font-style:normal'><span style="mso-spacerun: yes">&nbsp; </span>:</span></p><p class=MsoNormal align=left style='text-align:left;mso-pagination:none;tab-stops:21.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'>#include &lt;stdio.h&gt;</p><p class=Prog style='mso-pagination:none'>#include &lt;X11/Xlib.h&gt;</p><p class=Prog style='mso-pagination:none'>#include &lt;X11/bitmaps/gray3&gt;<spanstyle='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp; </span> <spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp; </span>/* Pour le fond de la tirette*/</p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'>#define<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>LONGUEUR<spanstyle='mso-tab-count:1'> </span>600<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*Les dimensions initiales de la barre */</p><p class=Prog style='mso-pagination:none'>#define<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>LARGEUR<spanstyle='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>50</p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'>char*<span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>nom_de_station= NULL;</p><p class=Prog style='mso-pagination:none'>unsigned long<span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>pixel_blanc, pixel_noir;</p><p class=Prog style='mso-pagination:none'>Display*<span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>dpy;</p><p class=Prog style='mso-pagination:none'>Window<span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>root,</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>barre,<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/* la barrede defilement, ici fenetre principale */</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>tirette;<spanstyle='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/* l'ascenseurproprement dit */</p><p class=Prog style='mso-pagination:none'>int<span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>screen_n;<spanstyle='mso-tab-count:1'>&nbsp; </span> <span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp; </span></p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'>/*</p><p class=Prog style='mso-pagination:none'><span style="mso-spacerun:yes">&nbsp;</span>* une procédure de sortie qui imprime un message d'erreur</p><p class=Prog style='mso-pagination:none'><span style="mso-spacerun:yes">&nbsp;</span>*/</p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'>void erreur (message_format, a1, a2,a3)</p><p class=Prog style='mso-pagination:none'>char* message_format;</p><p class=Prog style='mso-pagination:none'>{</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>printf(message_format, a1, a2, a3);</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>exit(1);</p><p class=Prog style='mso-pagination:none'>}</p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'>/*</p><p class=Prog style='mso-pagination:none'><span style="mso-spacerun:yes">&nbsp;</span>* La boucle d'événements</p><p class=Prog style='mso-pagination:none'><span style="mso-spacerun:yes">&nbsp;</span>*/</p><p class=Prog style='mso-pagination:none'>events ()<span style="mso-spacerun:yes">&nbsp; </span>{</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>XEvent<spanstyle='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>ev;</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>int<spanstyle='mso-tab-count:6'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>tire_x,<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*position courante de la tirette */</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:8'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>pt_x,<spanstyle='mso-tab-count:1'>&nbsp; </span> <span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*position de la souris */</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:8'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>i_bidon;<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*entier bidon */</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>int<spanstyle='mso-tab-count:6'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>width,<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*les dimensions */</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:8'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>height;<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*de la barre */</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Window<spanstyle='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>w_bidon;<spanstyle='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/* fenêtrebidon */</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>XWindowAttributes<span style='mso-tab-count:1'> </span>xwa;</p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>tire_x= 0;<span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*position courante de la tirette relativement à la barre */</p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* La largeur et la hauteur de la barrepeuvent avoir été modifiées par l'intervention </p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* du window manager et de l'utilisateur.Il faut récupérer ces données avant de</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* procéder au traitement des événements.</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>*/</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>XGetWindowAttributes(dpy, barre, &amp;xwa);</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>width<span style='mso-tab-count:1'> </span>= <span style='mso-tab-count:1'>&nbsp; </span>xwa.width;</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>height<span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>= <spanstyle='mso-tab-count:1'>&nbsp; </span>xwa.height;</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>for(;;) {</p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>XNextEvent(dpy, &amp;ev);</p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>switch(ev.type) {</p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>caseButtonPress:</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* Si on est dans la barre il fautdéplacer la tirette la où on a cliqué</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>*/</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if(ev.xbutton.subwindow != tirette) {</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:6'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* on doit tenir compte de la<spanstyle="mso-spacerun: yes">&nbsp; </span>position limite à droite </p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>*/</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:6'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if(ev.xbutton.x &gt; width - LARGEUR/2)</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:8'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>tire_x= width - LARGEUR;</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:6'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>else</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:8'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>tire_x= ev.xbutton.x - LARGEUR/2;</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:6'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if(tire_x<span style="mso-spacerun: yes">&nbsp; </span>&lt;<spanstyle="mso-spacerun: yes">&nbsp; </span>0)</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:8'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>tire_x= 0;</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:6'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>XMoveWindow(dpy, tirette, tire_x, 0);</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>break;</p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>caseMotionNotify: </p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* Récupérer la position actuelle dela<span style="mso-spacerun: yes">&nbsp; </span>souris relativement à la barre</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>*/</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>XQueryPointer(dpy, barre, &amp;w_bidon, &amp;w_bidon, &amp;i_bidon, <span style='mso-tab-count:14'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>&amp;i_bidon,&amp;pt_x, &amp;i_bidon, &amp;i_bidon);</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* Un effet de bord de cette fonction(avec PointerMotionHintMask) </p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* est de sélectionner l'envoi duprochain mouvement de souris</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>*</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* Déplacer le centre de la tirette àl'emplacement pointé en tenant </p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* compte des positions limites</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>*/</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>tire_x= pt_x - LARGEUR/2;</p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if(tire_x &lt; 0) </p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;&nbsp; </span><span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>tire_x= 0;</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if(tire_x &gt; width - LARGEUR) </p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;&nbsp; </span><span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>tire_x= width - LARGEUR;</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>XMoveWindow(dpy, tirette, tire_x, 0);</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>break;</p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>caseConfigureNotify:</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* La barre a changé de taille, il fautmodifier la hauteur de la tirette</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>*/</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>height= ev.xconfigure.height;</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>XResizeWindow(dpy, tirette, LARGEUR, height);</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>break;</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</p><p class=Prog style='mso-pagination:none'>}</p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'>main (argc, argv) char **argv;</p><p class=Prog style='mso-pagination:none'>{</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Pixmap<spanstyle='mso-tab-count:6'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>fond_gris;</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>XSetWindowAttributes<span style='mso-tab-count:1'> </span>xsw;</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* Ouvrir la connexion</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>*/</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>dpy= XOpenDisplay (nom_de_station);</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>if(dpy == NULL)</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>erreur(&quot;%s: ne peut ouvrir la connexion a %s\n&quot;, argv[0],</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:7'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>XDisplayName(nom_de_station));</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* Initialisations globales </p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>*/</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>screen_n<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>= <spanstyle='mso-tab-count:1'>&nbsp; </span>DefaultScreen (dpy);</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>root<span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>=<span style='mso-tab-count:1'>&nbsp; </span>RootWindow (dpy, screen_n);</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>pixel_blanc<span style='mso-tab-count:1'>&nbsp; </span>= <span style='mso-tab-count:1'>&nbsp; </span>WhitePixel(dpy, screen_n);</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>pixel_noir<span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp; </span>= <spanstyle='mso-tab-count:1'>&nbsp; </span>BlackPixel (dpy, screen_n);</p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* Créer la barre de défilement </p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>*/</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>barre= XCreateSimpleWindow (dpy, root, 200, 200, LONGUEUR, </p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:11'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>LARGEUR,2, pixel_blanc, pixel_noir);</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* Sélectionner ButtonPress etConfigureNotify sur la barre et les mouvements </p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* souris restreints aux mouvements seproduisant bouton enfoncé, plus le masque </p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* PointerMotionHintMask pour n’avoirtrace que d’un événement à la fois</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>*/</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>XSelectInput(dpy, barre, ButtonPressMask | ButtonMotionMask | </p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:9'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>PointerMotionHintMask| StructureNotifyMask);</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* Créer le fond de la tirette</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>*/</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>fond_gris= XCreateBitmapFromData (dpy, root, gray3_bits, gray3_width, </p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:12'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>gray3_height);</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>xsw.background_pixmap= fond_gris;</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* Puis créer la tirette à gauche dans labarre</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>*/</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>tirette= XCreateWindow (dpy, barre, 0, 0, LARGEUR, LARGEUR, 0, </p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:9'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>CopyFromParent,InputOutput, CopyFromParent, </p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:9'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>CWBackPixmap,&amp;xsw);</p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* Afficher les fenêtres avant derécupérer les événements<span style="mso-spacerun: yes">&nbsp; </span></p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>*/</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>XMapSubwindows(dpy, barre);</p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>XMapWindow(dpy, barre);</p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=Prog style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>events();</p><p class=Prog style='mso-pagination:none'>}</p><p class=Prog style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h2 style='mso-pagination:none;page-break-after:auto'>5.4.&nbsp;Monopolisationdu clavier ou de la souris</h2><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Focus&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;monopolisation&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Dispositif d’entrée:monopolisation\;.i.Focus\;.i.monopolisation\;&quot;<![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]--><span style='display:none'><o:p></o:p></span></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Demanière générale, on peut s'approprier la souris, le clavier, un bouton, ou unecombinaison de touches du clavier et même le serveur<a style='mso-footnote-id:ftn10' href="#_ftn10" name="_ftnref10" title=""><spanclass=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[10]<![endif]></span></span></a>.Des conventions régissent l’usage des fonctions d’appropriation mais endernière instance, ce sera le premier client en ayant exprimé la demande quisera rendu maître du dispositif. </p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Saisie&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Ona vu dans la section 5.1. que le terme de <i>saisie</i><span style='font-style:normal'> désignait l'appropriation des événements relatifs à un dispositif parune fenêtre appelée alors fenêtre accaparante (ou </span><i>grab-window</i><spanstyle='font-style:normal'>). Les événements concernant le dispositif saisi nesuivent plus alors le mécanisme standard de propagation et sontsystématiquement envoyés à la fenêtre accaparante quelle que soit la positionde la souris</span><a style='mso-footnote-id:ftn11' href="#_ftn11"name="_ftnref11" title=""><span class=MsoFootnoteReference><spanstyle='mso-special-character:footnote'><![if !supportFootnotes]>[11]<![endif]></span></span></a>.<!--[if supportFields]><span style='display:none'><span style='mso-element:field-begin'></span><span style="mso-spacerun: yes">&nbsp;</span>XE </span><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;Saisie&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h3 style='mso-pagination:none'>Monopolisation de la souris</h3><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lafonction permettant d’accaparer la souris est la fonction <spanstyle='font-family:Courier'>XGrabPointer</span>.</p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Saisie:du pointeur&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;monopolisation&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='display:none'>i.Souris:saisie des événements;</span></p><p class=fonction style='mso-pagination:none'>int <span style='font-family:Courier'>XGrabPointer</span><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-begin'></span> XE </span><span style='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;XGrabPointer&quot; </span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->(dpy,grab_window, owner_events, event_mask, pointer_mode,</p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>keyboard_mode, confine_to, cursor, time)</p><p class=fonction style='mso-pagination:none'>Window<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>grab_window;</p><p class=fonction style='mso-pagination:none'>Bool<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>owner_events;</p><p class=fonction style='mso-pagination:none'>unsigned int<spanstyle='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>event_mask;</p><p class=fonction style='mso-pagination:none'>int<span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>pointer_mode;</p><p class=fonction style='mso-pagination:none'>int<span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>keyboard_mode<spanstyle="mso-spacerun: yes">&nbsp; </span>;</p><p class=fonction style='mso-pagination:none'>Window<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>confine_to;</p><p class=fonction style='mso-pagination:none'>Cursor<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>cursor;</p><p class=fonction style='mso-pagination:none'>Time<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>time;</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>L’argument<i>grab_window</i><span style='font-style:normal'> spécifie la fenêtreaccaparante, le booléen </span><i>owner_events</i><span style='font-style:normal'>précise si les événements doivent être acheminés normalement pour les fenêtresde l’application. (S'il est positionné à </span><span style='font-family:Courier'>True</span>,le monopole déclenché est analogue au monopole automatiquement déclenché aprèssélection de l'événement <span style='font-family:Courier'>ButtonPress</span>par <span style='font-family:Courier'>ButtonPressMask</span> | <spanstyle='font-family:Courier'>OwnerGrabButtonMask</span>.) Le masque <i>event_mask</i><spanstyle='font-style:normal'> permet de spécifier les événements sélectionnésdurant le processus de saisie, annulant ceux précédemment sélectionnés par lafenêtre&nbsp;; </span><i>pointer_mode</i><span style='font-style:normal'>indique si les événements doivent être envoyés de manière synchrone ouasynchrone (</span><span style='font-family:Courier'>GrabModeSync</span> ou <spanstyle='font-family:Courier'>GrabModeAsync</span>)&nbsp;; <i>confine_to</i><spanstyle='font-style:normal'> spécifie si le pointeur doit rester bloquer dans unefenêtre particulière durant la saisie (passer </span><span style='font-family:Courier'>None</span> sinon)&nbsp;; <i>cursor</i><span style='font-style:normal'>indique la forme du pointeur pendant la durée de la saisie et </span><i>time</i><spanstyle='font-style:normal'> spécifie quand doit être déclenché le processus desaisie. On peut passer la constante </span><span style='font-family:Courier'>CurrentTime</span>.La constante de retour de cette fonction peut valoir <span style='font-family:Courier'>GrabSuccess</span>, <span style='font-family:Courier'>GrabNotViewable</span>,<span style='font-family:Courier'>AlreadyGrabbed</span>, <spanstyle='font-family:Courier'>GrabFrozen</span> ou <span style='font-family:Courier'>GrabInvalidTime</span>.Cette requête génère des événements <span style='font-family:Courier'>EnterNotify</span>et <span style='font-family:Courier'>LeaveNotify</span> .</p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Saisie:automatique&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='display:none'>i.Souris:saisie des événements;</span></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Ledéclenchement de la saisie automatique sur l'événement <span style='font-family:Courier'>ButtonPress</span> est en fait équivalent à un appel à <spanstyle='font-family:Courier'>XGrabPointer</span> en mode asynchrone, avec lemasque de sélection d'événements <i>event_mask</i><span style='font-style:normal'>de la fenêtre. La présence où l’absence du masque </span><spanstyle='font-family:Courier'>OwnerGrabButtonMask</span> <!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;OwnerGrabButtonMask</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->dansce masque de sélection revient à déclencher la requête avec le masque <i>owner_events</i><spanstyle='font-style:normal'> à </span><span style='font-family:Courier'>True</span>ou <span style='font-family:Courier'>False</span>. </p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Signalonségalement à propos de la souris, la fonction <span style='font-family:Courier'>XWarpPointer</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;XWarpPointer&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]--><astyle='mso-footnote-id:ftn12' href="#_ftn12" name="_ftnref12" title=""><spanclass=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[12]<![endif]></span></span></a>qui permet de placer la souris n'importe où et de récupérer le focus.</p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h3 style='mso-pagination:none'>Monopolisation du clavier</h3><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Pours’approprier le clavier on utilisera la fonction <span style='font-family:Courier'>XGrabKeyboard</span>.</p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Saisie:du clavier&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Clavier:saisie des événements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=fonction style='mso-pagination:none'>int <span style='font-family:Courier'>XGrabKeyboard</span><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-begin'></span> XE </span><span style='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;XGrabKeyboard&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]-->(dpy, grab_window,owner_events, pointer_mode,</p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>keyboard_mode,time)</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Cettefonction génère elle aussi l’envoi d’événements <span style='font-family:Courier'>FocusIn</span>et <span style='font-family:Courier'>FocusOut</span><i> </i><spanstyle='font-style:normal'>aux applications intéressées, le champ </span><spanstyle='font-family:Courier'>mode</span> indiquant qu’il s'agit d’une saisie<spanstyle='font-family:Courier;display:none'>;</span>. Les arguments sontsimilaires à ceux de <span style='font-family:Courier'>XGrabPointer</span>.Selon la valeur de <i>owner_events</i><span style='font-style:normal'>, on peutici encore limiter la saisie et garder un acheminement normal des événements àl'intérieur de l'application.</span></p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Saisie:active/passive&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;monopolisation&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h3 style='mso-pagination:none'>Les saisies passives</h3><p class=MsoNormal style='mso-pagination:none;page-break-after:avoid'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none;page-break-after:avoid'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Demanière générale, une saisie peut être activée par&nbsp;:</p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>•L'enfoncement d'un bouton de souris. C'est le comportement par défaut dusystème (<i>automatic</i><span style='font-style:normal'> </span><i>grab</i><spanstyle='font-style:normal'>). </span></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>•Un appel à <span style='font-family:Courier'>XGrabPointer</span> <!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;XGrabPointer</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->ou<span style='font-family:Courier'>XGrabKeyboard</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;XGrabKeyboard&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]--><b>. </b><spanstyle='font-weight:normal'>C'est une saisie brutale et les applications nedoivent pas en abuser.</span></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>•La réalisation d’actions définies lors d'une appropriation <i>passive</i><spanstyle='font-style:normal'>. Une telle appropriation conditionnelle aura étéprécédemment demandée par un appel à </span><span style='font-family:Courier'>XGrabButton</span><!--[if supportFields]><span style='display:none'><span style='mso-element:field-begin'></span><span style="mso-spacerun: yes">&nbsp;</span>XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;XGrabButton</span><span style='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->ouà <span style='font-family:Courier'>XGrabKey</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;XGrabKey&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]--><b>.<o:p></o:p></b></p><p class=MsoNormal style='mso-pagination:none'><span style='display:none'>i.Souris:saisiedes événements;</span></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lessaisies<i> passives</i><span style='font-style:normal'> sont des demandes desaisies qui ne sont pas immédiatement déclenchées. On parle alors de saisiespassives, par opposition aux saisies </span><i>actives</i><spanstyle='font-style:normal'>, où la saisie est directement activée par la requête</span><astyle='mso-footnote-id:ftn13' href="#_ftn13" name="_ftnref13" title=""><spanclass=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[13]<![endif]></span></span></a>.</p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Saisie:active/passive&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lesfonctions suivantes permettent de demander une saisie qui ne sera activée quesi certains événements particuliers se produisent&nbsp;:<!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;Saisie:active/passive&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;monopolisation&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;OwnerGrabButtonMask:voir aussi XGrabButton&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=fonction style='mso-pagination:none'><span style='font-family:Courier'>XGrabButton</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;XGrabButton&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]-->(dpy, button,modifiers, grab_window, owner_events, event_mask,</p><p class=fonction style='mso-pagination:none'><span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>pointer_mode,keyboard_mode, confine_to, cursor)</p><p class=fonction style='mso-pagination:none'><span style='font-family:Courier'>XGrabKey</span><spanstyle='display:none'>;</span>(dpy, keycode, modifiers, grab_window,owner_events, pointer_mode,</p><p class=fonction style='mso-pagination:none'><span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>keyboard_mode)</p><p class=fonction style='mso-pagination:none'>unsigned int<spanstyle='mso-tab-count:1'>&nbsp; </span>button, keycode ;</p><p class=fonction style='mso-pagination:none'>unsigned int<spanstyle='mso-tab-count:1'>&nbsp; </span>modifiers ;</p><p class=fonction style='mso-pagination:none'>Window<span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>grab_window ;</p><p class=fonction style='mso-pagination:none'>Bool<span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>owner_events;</p><p class=fonction style='mso-pagination:none'>unsigned int<spanstyle='mso-tab-count:1'>&nbsp; </span>event_mask ;</p><p class=fonction style='mso-pagination:none'>int<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>pointer_mode,</p><p class=fonction style='mso-pagination:none'><span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>keyboard_mode;</p><p class=fonction style='mso-pagination:none'>Window<span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>confine_to ;</p><p class=fonction style='mso-pagination:none'>Cursor<span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>cursor ;</p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Ainsi,certains programmes autorisent l’utilisateur à choisir une combinaison detouches pour faire apparaître un menu n'importe où. En réalité, le clavier estalors l’objet d’une saisie passive effectuée avec <span style='font-family:Courier'>XGrabKey</span>, saisie qui n'est activée que par l’enfoncement decette combinaison de touches. Une saisie passive a alors gain de cause sur lasaisie active déclenchée par un simple enfoncement du bouton (sans lacombinaison de touches).</p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Desfonctions symétriques permettent d'interrompre ces processusd'appropriation&nbsp;:</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=fonction style='mso-pagination:none'><span style='font-family:Courier'>XUngrabPointer</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;XUngrabPointer&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->(dpy,time)</p><p class=fonction style='mso-pagination:none'><span style='font-family:Courier'>XUngrabKeyboard</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;XUngrabKeyboard&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]-->(dpy, time)</p><p class=fonction style='mso-pagination:none'><span style='font-family:Courier'>XUngrabKey</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;XUngrabKey&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]-->(dpy, keycode,modifiers, grab_window)</p><p class=fonction style='mso-pagination:none'><span style='font-family:Courier'>XUngrabButton</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;XUngrabButton&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]-->(dpy, button,modifiers, grab_window)<b><o:p></o:p></b></p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;appropriation des dispositifs&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='display:none'><o:p></o:p></span></p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Saisie&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle='display:none'>i.Souris:saisie des événements;</span></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Ilexiste en outre une fonction qui permet de modifier les paramètres d’une saisieactive de la souris :</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=fonction style='mso-pagination:none'><span style='font-family:Courier'>XChangeActivePointerGrab</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;XChangeActivePointerGrab</span> <span style='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->(dpy,event_mask, cursor, time)</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h2 style='mso-pagination:none;page-break-after:auto'>5.5.&nbsp;EnterNotify etLeaveNotify</h2><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;mouvements de souris&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;EnterNotify&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;LeaveNotify&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->Lesévénements d'entrée et sortie des fenêtres sont de type <span style='font-family:Courier'>EnterNotify</span> et <span style='font-family:Courier'>LeaveNotify</span>.Ces événements concernent la souris, mais traduisent en réalité autant unepropriété des fenêtres franchies qu'un événement souris. En voici une brèvedescription.<!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-begin'></span> XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Souris:mouvements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><table border=0 cellspacing=0 cellpadding=0 style='border-collapse:collapse; mso-table-layout-alt:fixed;mso-padding-alt:0cm 4.0pt 0cm 4.0pt'> <tr>  <td width=153 valign=top style='width:153.0pt;padding:0cm 4.0pt 0cm 4.0pt'>  <p class=AttrLarger style='margin-left:141.0pt;text-indent:-103.0pt;  mso-pagination:none'><span style='font-family:Courier'>EnterNotify</span><!--[if supportFields]><span  style='font-family:Courier'><span style='mso-element:field-begin'></span> XE <span  style="mso-spacerun: yes">&nbsp;</span>&quot;EnterNotify&quot; </span><![endif]--><!--[if supportFields]><span  style='font-family:Courier'><span style='mso-element:field-end'></span></span><![endif]--></p>  <p class=AttrLarger style='margin-left:141.0pt;text-indent:-103.0pt;  mso-pagination:none'><span style='font-family:Courier'>LeaveNotify </span><!--[if supportFields]><span  style='font-family:Courier'><span style='mso-element:field-begin'></span><span  style="mso-spacerun: yes">&nbsp;</span>XE <span style="mso-spacerun:  yes">&nbsp;</span>&quot;LeaveNotify &quot; </span><![endif]--><!--[if supportFields]><span  style='font-family:Courier'><span style='mso-element:field-end'></span></span><![endif]--></p>  </td>  <td width=207 valign=top style='width:207.0pt;padding:0cm 4.0pt 0cm 4.0pt'>  <p class=AttrLarger style='margin-top:0cm;margin-right:4.0pt;margin-bottom:  0cm;margin-left:0cm;margin-bottom:.0001pt;text-indent:0cm;mso-pagination:  none'>La souris est entrée ou sortie d'une fenêtre. On sélectionne ces  événements avec les masques <span style='font-family:Courier'>EnterWindowMask</span>  <!--[if supportFields]><span style='font-family:Courier;display:none'><span  style='mso-element:field-begin'></span><span style="mso-spacerun:  yes">&nbsp;</span>XE </span><span style='font-family:Courier'><span  style="mso-spacerun: yes">&nbsp;</span>&quot;EnterWindowMask</span> <span  style='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><span  style='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->et<span  style='font-size:9.0pt'> </span><span style='display:none'>;</span><span  style='font-family:Courier'>LeaveWindowMask</span><!--[if supportFields]><span  style='display:none'><span style='mso-element:field-begin'></span> XE </span><span  style='font-family:Courier'><span style="mso-spacerun:  yes">&nbsp;</span>&quot;LeaveWindowMask&quot; </span><![endif]--><!--[if supportFields]><span  style='display:none'><span style='mso-element:field-end'></span></span><![endif]-->.  Ces événements se produisent lorsqu'on déplace la souris d'une fenêtre à  l'autre ou lorsqu'on affiche (ou retire) une fenêtre sous la souris. </p>  </td> </tr></table><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Eneffet, ces événements traduisent tous les changements de position du pointeurrelativement aux empilements des fenêtres. Ils peuvent donc se produire nonseulement quand la souris bouge et franchit une frontière, mais également quandles fenêtres se trouvent déplacées par une requête dans la pile. Le but estd'avertir les applications de la position de leurs fenêtres vis-à-vis de laréception des événements concernant les entrées.</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lastructure associée à ce type d'événement dans l'union <span style='font-family:Courier'>XEvent</span> a le type <span style='font-family:Courier'>XCrossingEvent</span>et est accessible par le membre <span style='font-family:Courier'>xcrossing</span>de l'union. Cette structure partage de nombreux champs avec les événementssouris étudiés précédemment. On retrouve en effet les neufs champs décrits pourles événements boutons (cf. fig. 5.2.). En outre elle partage un certain nombrede champs avec les structures de type <span style='font-family:Courier'>XFocusEvent</span>correspondant aux événements de type <span style='font-family:Courier'>FocusIn</span>et <span style='font-family:Courier'>FocuOut</span>. Les champs supplémentairessont les suivants : <span style='font-family:Courier'>focus</span>, <spanstyle='font-family:Courier'>detail</span> et <span style='font-family:Courier'>mode</span>.<!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;Clavier:saisie des événements&quot;<![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=AttrLarger style='mso-pagination:none'>Bool <span style='font-family:Courier'>focus</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Cebooléen indique si la fenêtre concernée a le focus du clavier.</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style="mso-spacerun:yes">&nbsp;</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lafenêtre qui reçoit <span style='font-family:Courier'>EnterNotify</span> <!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;EnterNotify</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->estnormalement avertie qu’elle va recevoir ensuite les événements souris.Normalement, elle reçoit aussi le focus du clavier, sauf en cas d’appropriationdu focus. Pour savoir si la fenêtre dans laquelle entre la souris a le focus,il faut consulter le champs <span style='font-family:Courier'><i>focus</i></span>.Il est à <span style='font-family:Courier'>True</span> si cette fenêtre a lefocus (ou compte la fenêtre ayant le focus parmi ses ancêtres), et à <spanstyle='font-family:Courier'>False</span> sinon.<!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;focus du clavier&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;mouvements de souris&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Souris:mouvements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h3 style='mso-pagination:none'>Les champs detail et mode</h3><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Nousrecommandons au lecteur de sauter cette section s'il n'a pas immédiatementbesoin d'informations précises sur les événements <span style='font-family:Courier'>EnterNotify</span> et <span style='font-family:Courier'>LeaveNotify</span>.</p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p class=AttrLarger style='mso-pagination:none'>int <span style='font-family:Courier'>detail</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Cetentier peut prendre les valeurs <span style='font-family:Courier'>NotifyAncestor</span>,<span style='font-family:Courier'>NotifyVirtual</span>, <span style='font-family:Courier'>NotifyInferior</span>, <span style='font-family:Courier'>NotifyNonlinear</span>ou <span style='font-family:Courier'>NotifyNonlinearVirtual</span>. Il indiquela position de la fenêtre qui reçoit l'événement relativement au mouvement dupointeur.</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Dansles cas simples où les deux fenêtres sont dans une relation de parenté directe,le champ <span style='font-family:Courier'>detail</span> indique la destinationdu mouvement pour un événement de sortie et son origine pour une entrée. Parexemple, si l’on passe de F1 à F2 (F2 étant fille de F1) selon le mouvementindiqué par la flèche A sur la figure 5.4. (page 108), F1 recevra un événement <spanstyle='font-family:Courier'>LeaveNotify</span> de détail <spanstyle='font-family:Courier'>NotifyInferior</span> (avec un champ <spanstyle='font-family:Courier'>subwindow</span> à F2). Symétriquement, F2 recevraun <span style='font-family:Courier'>EnterNotify</span> de détail <spanstyle='font-family:Courier'>NotifyAncestor</span>. Le mouvement inverse de F2 àF1 donnerait un <span style='font-family:Courier'>LeaveNotify</span> de détail <spanstyle='font-family:Courier'>NotifyAncestor</span> et un <span style='font-family:Courier'>EnterNotify</span> de detail <span style='font-family:Courier'>NotifyInferior</span>.</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lasituation se complique un peu quand on passe d'une fenêtre à une autre, sansque les deux fenêtres soient dans un rapport de parenté directe. En effet, desévénements <span style='font-family:Courier'>EnterNotify</span> <!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;EnterNotify</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->et<span style='font-family:Courier'>LeaveNotify</span> <!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;LeaveNotify</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->sontégalement envoyés aux fenêtres qui se trouvent sur le chemin entre la fenêtred'origine et la fenêtre destination dans la hiérarchie. On dit alors que cesfenêtres intermédiaires sont traversées <i>virtuellement</i><spanstyle='font-style:normal'>.</span></p><p class=MsoNormal align=center style='text-align:center;mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Souris:mouvements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if gte vml 1]><v:shape id="_x0000_i1028" type="#_x0000_t75" style='width:218pt;height:2in'> <v:imagedata src="05_fichiers/image009.gif" o:althref="05_fichiers/image010.pct"  o:title=""/></v:shape><![endif]--><![if !vml]><img width=218 height=144src="05_fichiers/image011.png" v:shapes="_x0000_i1028"><![endif]></p><p class=MsoNormal align=center style='text-align:center;mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal align=center style='text-align:center;mso-pagination:none'>fig.5.4. <i>Les mouvements d'entrée/sortie de fenêtres<o:p></o:p></i></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Dansle cas où l'origine et la destination sont situées sur une même branche (cas deparenté verticale), le champ <span style='font-family:Courier'>detail</span> dela structure <span style='font-family:Courier'>event<i>.</i></span><spanstyle='font-family:Courier'>xcrossing </span>contiendra la valeur <spanstyle='font-family:Courier'>NotifyVirtual</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;NotifyVirtual&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]--><i><spanstyle="mso-spacerun: yes">&nbsp;</span></i><span style='font-style:normal'>pour</span><i></i><span style='font-style:normal'>les fenêtres intermédiaires, l'origine etla destination recevant comme précédemment un champ </span><spanstyle='font-family:Courier'>detail</span> à <span style='font-family:Courier'>NotifyAncestor</span>ou <span style='font-family:Courier'>NotifyInferiror</span> selon le sens dumouvement.</p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;mouvements de souris&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Parcontre, si l'origine et la destination du mouvement sont dans un rapport deparenté non vertical, elles recevront seulement une indication de détail<i> </i><spanstyle='font-family:Courier;font-style:normal'>NotifyNonlinear</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;NotifyNonlinear&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]--><i><spanstyle="mso-spacerun: yes">&nbsp;</span></i><span style='font-style:normal'>etles fenêtres intermédiaires situées sur le chemin joignant l'une à l'autre(l'ancêtre commun exclu) recevront un détail à </span><span style='font-family:Courier'>NotifyNonlinearVirtual</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;NotifyNonlinearVirtual&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]-->. La situation est lamême si l'on change d'écran&nbsp;: les fenêtres intermédiaires (jusqu'aux deuxracines) recevront un détail <span style='font-family:Courier'>NotifyNonlinearVirtual</span>et l'origine et la destination, un détail <span style='font-family:Courier'>NotifyNonlinear</span>.</p><p class=MsoNormal style='mso-pagination:none'><span style="mso-spacerun:yes">&nbsp;</span></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Parexemple, un passage de F2 à G2 illustré par le mouvement de flèche B sur lafigure 5.4. provoquera un <span style='font-family:Courier'>LeaveNotify</span>sur F2 de détail <span style='font-family:Courier'>NotifyNonlinear</span>, un <spanstyle='font-family:Courier'>LeaveNotify</span> sur F1 de détail <spanstyle='font-family:Courier'>NotifyNonlinearVirtual</span>, un <spanstyle='font-family:Courier'>EnterNotify</span> sur G1 de détail <spanstyle='font-family:Courier'>NotifyNonlinearVitual</span> avec <spanstyle='font-family:Courier'>subwindow</span> G2 et un <span style='font-family:Courier'>EnterNotify</span> sur G2 de détail <span style='font-family:Courier'>NotifyNonlinear</span>.</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=AttrLarger style='mso-pagination:none'>int <span style='font-family:Courier'>mode</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Cetentier peut prendre les valeurs <span style='font-family:Courier'>NotifyNormal</span>,<span style='font-family:Courier'>NotifyGrab</span> ou <span style='font-family:Courier'>NotifyUngrab</span>. Il permet de savoir si l'événement provient<spanstyle="mso-spacerun: yes">&nbsp; </span>d'un mouvement normal ou s'il résultedu début ou de la fin d'un processus de saisie.</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none;page-break-after:avoid'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Desévénements de type <span style='font-family:Courier'>EnterNotify</span> et <spanstyle='font-family:Courier'>LeaveNotify</span> sont en effet envoyés quand lasouris est saisie et que le pointeur ne se trouvait pas déjà dans la fenêtreaccaparante.<span style="mso-spacerun: yes">&nbsp; </span>Symétriquement, desévénements seront envoyés aux applications pour avertir de la fin du processusde saisie (par exemple, sur le relâchement d'un bouton). C’est le champs <spanstyle='font-family:Courier'>mode</span> qui permet de savoir s’il s’agit d’uncas simple (<span style='font-family:Courier'>NotifyNormal</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;NotifyNormal&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]-->) ou s’il s’agit d’unenotification de début ou de fin de saisie (<span style='font-family:Courier'>NotifyGrab</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;NotifyGrab&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]-->, ou <spanstyle='font-family:Courier'>NotifyUngrab</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;NotifyUngrab&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]-->).</p><p class=MsoNormal style='mso-pagination:none;page-break-after:avoid'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;mouvements de souris&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Souris:mouvements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Parexemple, dans le cas où l'on passe de F2 à F1, mais après enfoncement de boutondans F2, on recevra les événements suivants&nbsp;: un <span style='font-family:Courier'>LeaveNotify</span> sur F2 de détail <span style='font-family:Courier'>NotifyAncestor</span>,mode <span style='font-family:Courier'>NotifyNormal</span>, pour annoncer lasortie de fenêtre. Ensuite, ce n'est qu'après le relâchement du bouton que l'onrecevra les événements souris sur F1 (car dans l'intervalle, la saisie estautomatiquement activée sur F2). Quand le bouton sera relâché sur F1, onrecevra un <span style='font-family:Courier'>LeaveNotify</span> sur F2, de mode<span style='font-family:Courier'>NotifyUngrab</span> et détail <spanstyle='font-family:Courier'>NotifyAncestor</span> pour annoncer la fin de lasaisie, et un <span style='font-family:Courier'>EnterNotify</span> sur F1, demode <span style='font-family:Courier'>NotifyUngrab</span> avec <spanstyle='font-family:Courier'>detail</span> <span style='font-family:Courier'>NotifyInferior</span>pour annoncer <i>l'entrée</i><span style='font-style:normal'> dans la fenêtreF1 due à la fin du processus de saisie. Les composantes du pointeur à ce momentseront celles qu'il avait au moment où le bouton a été relâché dans F1 (et nonpas celles qu'il avait au moment du franchissement du bord). Ce n'est en effetqu'à partir de ce moment là que la souris est considérée comme étant dans F1 dupoint de vue de l'envoi des événements souris. Auparavant, c'est F2 quirecevait les événements.</span></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Unefin de saisie peut ainsi provoquer une cascade d'événements <spanstyle='font-family:Courier'>EnterNotify</span> <!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;EnterNotify</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->et<span style='font-family:Courier'>LeaveNotify</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;LeaveNotify&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->,en particulier quand on aura positionné le masque <span style='font-family:Courier'>OwnerGrabButtonMask</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;OwnerGrabButtonMask&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->.En effet, ce masque, qui permet aux fenêtres de recevoir les événements souris,ne supprime pas pour autant le phénomène de saisie, et il y a quand mêmeémission d'événements avertissant les fenêtres de la saisie.</p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;mouvements de souris&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='display:none'>i.Souris:saisie des événements;</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;Souris:mouvements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Ainsi, un passage de F2 à G2, avec saisie (enfoncement de bouton dans F2, relâcherdans G2) et sélection du masque <span style='font-family:Courier'>OwnerGrabButtonMask</span><astyle='mso-footnote-id:ftn14' href="#_ftn14" name="_ftnref14" title=""><spanclass=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[14]<![endif]></span></span></a>,déclenchera l'envoi des événements suivants&nbsp;:</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='margin-left:14.0pt;mso-pagination:none'><spanstyle='font-family:Courier'>LeaveNotify</span> sur F2 </p><p class=MsoNormal style='margin-left:14.0pt;mso-pagination:none'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>mode <spanstyle='font-family:Courier'>NotifyNormal</span>, detail <span style='font-family:Courier'>NotifyNonlinear</span></p><p class=MsoNormal style='margin-left:14.0pt;mso-pagination:none'><spanstyle='font-family:Courier'>LeaveNotify</span> sur F1 </p><p class=MsoNormal style='margin-left:14.0pt;mso-pagination:none'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>mode <spanstyle='font-family:Courier'>NotifyNormal</span>,<span style='mso-tab-count:1'>&nbsp; </span>detail <span style='font-family:Courier'>NotifyNonlinearVirtual</span></p><p class=MsoNormal style='margin-left:14.0pt;mso-pagination:none'><spanstyle='font-family:Courier'>EnterNotify</span> sur G1, subwindow G2</p><p class=MsoNormal style='margin-left:14.0pt;mso-pagination:none'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>mode <spanstyle='font-family:Courier'>NotifyNormal</span>,<span style="mso-spacerun:yes">&nbsp; </span>detail <span style='font-family:Courier'>NotifyNonlinearVirtual</span></p><p class=MsoNormal style='margin-left:14.0pt;mso-pagination:none'><spanstyle="mso-spacerun: yes">&nbsp;</span><span style='font-family:Courier'>EnterNotify</span>sur G2 </p><p class=MsoNormal style='margin-left:14.0pt;mso-pagination:none'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>mode <spanstyle='font-family:Courier'>NotifyNormal</span>, detail <span style='font-family:Courier'>NotifyNonlinear</span></p><p class=MsoNormal style='margin-left:14.0pt;mso-pagination:none'><spanstyle='font-family:Courier'>ButtonRelease</span> sur G2</p><p class=MsoNormal style='margin-left:14.0pt;mso-pagination:none'><spanstyle='font-family:Courier'>LeaveNotify</span> sur F2 </p><p class=MsoNormal style='margin-left:14.0pt;mso-pagination:none'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>mode <spanstyle='font-family:Courier'>NotifyUngrab</span>, detail <span style='font-family:Courier'>NotifyNonlinear</span></p><p class=MsoNormal style='margin-left:14.0pt;mso-pagination:none'><spanstyle='font-family:Courier'>LeaveNotify</span> sur F1 </p><p class=MsoNormal style='margin-left:14.0pt;mso-pagination:none'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>mode <spanstyle='font-family:Courier'>NotifyUngrab</span>, detail <span style='font-family:Courier'>NotifyNonlinearVirtual</span></p><p class=MsoNormal style='margin-left:14.0pt;mso-pagination:none'><spanstyle='font-family:Courier'>EnterNotify</span> sur G1, subwindow G2</p><p class=MsoNormal style='margin-left:14.0pt;mso-pagination:none'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>mode <spanstyle='font-family:Courier'>NotifyUngrab</span>, detail <span style='font-family:Courier'>NotifyNonlinearVirtual</span></p><p class=MsoNormal style='margin-left:14.0pt;mso-pagination:none'><spanstyle='font-family:Courier'>EnterNotify</span> sur G2 </p><p class=MsoNormal style='margin-left:14.0pt;mso-pagination:none'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>mode <spanstyle='font-family:Courier'>NotifyUngrab</span>, detail <span style='font-family:Courier'>NotifyNonlinear</span><i><o:p></o:p></i></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h2 style='mso-pagination:lines-together'>5.6.&nbsp;FocusIn et FocusOut</h2><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;focus du clavier&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;FocusOut&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;FocusIn&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->Ona vu que le modèle développé par la librairie Xlib comporte la notion defenêtre ayant le focus du clavier. Par défaut, c'est la fenêtre racine qui a lefocus, ce qui a pour effet de transmettre le focus à toute fenêtre danslaquelle se trouve la souris. Ainsi, les événements <span style='font-family:Courier'>EnterNotify</span> et <span style='font-family:Courier'>LeaveNotify</span>qui indiquent à l’application que la souris entre ou sort d'une fenêtre luiindiqueront aussi normalement si elle peut recevoir les entrées du clavier.Cependant, on l'a vu, la réception d'un événement<span style="mso-spacerun:yes">&nbsp; </span>de type <span style='font-family:Courier'>EnterNotify</span>ne garantit pas toujours que la fenêtre qui le reçoit ait le focus du clavier,à cause des divers mécanismes de saisie. En particulier, pour connaître l’étatdu focus du clavier au moment où la souris entre dans une fenêtre, il fautconsulter le champs <span style='font-family:Courier'>focus</span> del'événement. </p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Clavier:saisie des événements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Eneffet, plusieurs fonctions du système peuvent perturber la convention pardéfaut. Par exemple, la fonction<span style="mso-spacerun: yes">&nbsp; </span><spanstyle='font-family:Courier'>XSetInputFocus</span> <!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;XSetInputFocus</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->permetd’attribuer le focus à une fenêtre pourvu qu’elle soit affichée. Les événements<span style='font-family:Courier'>FocusIn</span> <!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;FocusIn</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->et<span style='font-family:Courier'>FocusOut</span> <!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;FocusOut</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->sontlà pour avertir les applications des changements de focus survenant ainsi,suite à l’appel d’un client à <span style='font-family:Courier'>XSetInputFocus</span>ou à une fonction accaparant le clavier comme <span style='font-family:Courier'>XGrabKeyboard</span>ou <span style='font-family:Courier'>XGrabKey</span>. </p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=AttrLarger style='mso-pagination:none'><span style='font-family:Courier'>FocusIn</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;FocusIn&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]-->,<spanstyle="mso-spacerun: yes">&nbsp; </span><span style='font-family:Courier'>FocusOut<spanstyle='mso-tab-count:1'>&nbsp; </span></span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;FocusOut&#9;&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Cesévénements sont sélectionnables par <span style='font-family:Courier'>FocusChangeMask</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;FocusChangeMask&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]-->. Le champ d’accès dela structure dans une union <span style='font-family:Courier'>XEvent</span> estle membre <span style='font-family:Courier'>xfocus</span>. L'événement <spanstyle='font-family:Courier'>FocusIn</span> informe l'application qu'une de sesfenêtres bénéficie du focus du clavier et <span style='font-family:Courier'>FocusOut</span>qu'elle vient de le perdre.</p><p class=AttrLarger style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Cesévénements sont assez analogues aux événements d'entrée/sortie des fenêtres.Ils traduisent en quelque sorte un mouvement du focus (les événementsd'entrée/sortie traduisant un mouvement du pointeur) et permettent dedéterminer si l'application peut ou non recevoir des entrées. </p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none;page-break-after:avoid'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h3 style='mso-pagination:none'>Quand une application a-t-elle le focus duclavier ?</h3><p class=MsoNormal style='mso-pagination:none;page-break-after:avoid'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none;page-break-after:avoid'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Pourrésumer ces diverses considérations sur le focus du clavier et sonaccessibilité, voici une boucle de programme indiquant par un booléen nommé <i>Clavier_accessible</i><spanstyle='font-style:normal'>,</span><i> </i><span style='font-style:normal'><spanstyle="mso-spacerun: yes">&nbsp;</span>si l’application peut ou non recevoirles entrées du clavier :</span></p><p class=MsoNormal style='mso-pagination:none;page-break-after:avoid'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Clavier:accessibilité&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;focus du clavier&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=program style='line-height:normal;mso-pagination:none'>Bool <spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp; </span>Clavier_accessible,</p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Focus_saisi= False;</p><p class=program style='line-height:normal;mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=program style='line-height:normal;mso-pagination:none'>for (;;) {</p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp; </span>XNextEvent (dpy, &amp;ev);</p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp; </span>switch (ev.type) {</p><p class=program style='line-height:normal;mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>caseFocusIn:</p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*<i>On est sûr d’avoir le focus du clavier </i><span style='font-style:normal'>*/</span></p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Focus_saisi= True;</p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Clavier_accessible= True;</p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>break;</p><p class=program style='line-height:normal;mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>caseFocusOut:<span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp; </span></p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*<i>On est sûr d’avoir perdu le focus </i><span style='font-style:normal'>*/</span></p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Clavier_accessible= False;</p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Focus_saisi= False;</p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>break;</p><p class=program style='line-height:normal;mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>caseEnterNotify: </p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*<i>Il faut tester le champ focus de l’ev. </i><span style='font-style:normal'>*/</span><spanstyle='font-family:Times'><o:p></o:p></span></p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if(ev.xcrossing.focus)</p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>then<spanstyle="mso-spacerun: yes">&nbsp; </span>Clavier_accessible = True ;</p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>else<spanstyle="mso-spacerun: yes">&nbsp; </span>Clavier_accessible = False;</p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>break;</p><p class=program style='line-height:normal;mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>caseLeaveNotify: </p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*<i>Normalement, on n’a pas le focus, </i></p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>* <i>sauf si on a saisi le clavier</i></p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>*/</p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if(Focus_saisi)</p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>thenClavier_accessible = True ;</p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>elseClavier_accessible = False;</p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>break;</p><p class=program style='line-height:normal;mso-pagination:none'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp; </span>}</p><p class=program style='line-height:normal;mso-pagination:none'>}</p><p class=program style='line-height:normal;mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Clavier:saisie des événements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h3 style='mso-pagination:none'>Les champs mode et détail d'un changement defocus</h3><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>Nous invitons ici encore le lecteur àsauter la fin de cette section s'il n'a pas réellement besoin de détail sur lesévénements de changement de focus. </p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Outreles cinq champs communs à tous les types d'événements, les événements dechangement de focus contiennent deux autres champs&nbsp;: un champ <spanstyle='font-family:Courier'>mode</span> et un champ <span style='font-family:Courier'>detail</span>. (Il n'y a pas de champ <span style='font-family:Courier'><i>focus</i></span>car le type de l'événement indique en lui-même si la fenêtre peut recevoir desentrées).</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=AttrLarger style='mso-pagination:none'>int <span style='font-family:Courier'>mode</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lechamp <span style='font-family:Courier'>mode</span> est tout-à-fait analogue àcelui des événements de type <span style='font-family:Courier'>EnterNotify</span>.Il indique si l'avertissement provient d'un simple changement de focus (i.e.d'un appel à <span style='font-family:Courier'>XSetInputFocus</span> ) ou s'ilrésulte d'un mécanisme de saisie (par exemple, un appel à <spanstyle='font-family:Courier'>XGrabKeyboard</span>). Il peut prendre les valeurs <spanstyle='font-family:Courier'>NotifyNormal</span>, <span style='font-family:Courier'>NotifyGrab</span>,ou <span style='font-family:Courier'>NotifyUngrab</span>.</p><p class=AttrLarger style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=AttrLarger style='mso-pagination:none'>int <span style='font-family:Courier'>detail</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lechamp detail des événements de type <span style='font-family:Courier'>FocusIn</span>et <span style='font-family:Courier'>FocusOut</span> peut prendre les valeurssuivantes :</p><p class=AttrLarger style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle='font-family:Courier'>NotifyAncestor, NotifyVirtual, NotifyInferior,NotifyNonLinear, NotifyNonLinearVirtual,<span style="mso-spacerun: yes">&nbsp;</span>NotifyPointer, NotifyPointerRoot, NotifyDetailNone. </span></p><p class=Attr style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp; </span>Son sens est très voisin de celui desévénements d'entrée/sortie de fenêtres, à ceci près qu'il s'agit d'un mouvementdu focus au lieu d'un mouvement de souris. Comme dans le cas de <spanstyle='font-family:Courier'>EnterNotify</span> et <span style='font-family:Courier'>LeaveNotify</span>, de nombreuses fenêtres sont susceptibles derecevoir ces événements. La valeur du champ <span style='font-family:Courier'>detail</span>est basée sur les distinctions suivantes&nbsp;:<span style="mso-spacerun:yes">&nbsp; </span>fenêtre d'origine (ancien focus), fenêtre de destination(nouveau focus) et fenêtre du pointeur contenant la souris au moment duchangement de focus. </p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Focus&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Dansles cas simples où l'origine et la destination sont dans un rapport de parentévertical, le champ <span style='font-family:Courier'>detail</span> prendra lavaleur <span style='font-family:Courier'>NotifyAncestor</span> et <spanstyle='font-family:Courier'>NotifyInferior</span> pour les extrêmes, et <spanstyle='font-family:Courier'>NotifyVirtual</span> pour les fenêtresintermédiaires. Dans les cas où l'origine et la destination ne sont pasancêtres l'une de l'autre, il prendra les valeurs <span style='font-family:Courier'>NotifyNonlinear</span> pour les extrémités et <span style='font-family:Courier'>NotifyNonlinearVirtual</span> pour les fenêtres situées entres lesdeux, l'ancêtre commun étant exclu. Ce sera également le cas pour leschangements de focus survenant sur des racines différentes.</p><p class=MsoNormal style='mso-pagination:none;page-break-after:avoid'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none;page-break-after:avoid'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Laprésence de la fenêtre contenant le pointeur complique un peu la situation. Eneffet, cette fois, des événements de changement de focus seront envoyés nonseulement à toutes les fenêtres situées entre la source et la destination dansla hiérarchie, mais également à toutes les fenêtres situées entre la fenêtrecontenant le pointeur et la destination, si cette dernière n'est pas une desextrémités. Ainsi, la fenêtre contenant le pointeur et toutes les ascendantesconcernées par ce changement de focus recevront également des événements detype <span style='font-family:Courier'>FocusIn</span> (ou <spanstyle='font-family:Courier'>FocusOut</span>, selon les cas) avec un champ <spanstyle='font-family:Courier'>detail</span> à <span style='font-family:Courier'>NotifyPointer</span>.</p><p class=MsoNormal style='mso-pagination:none;page-break-after:avoid'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none;page-break-after:avoid'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Deplus, si une requête de saisie indique une attribution de focus à <spanstyle='font-family:Courier'>PointerRoot</span> <!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;PointerRoot</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->ou<span style='font-family:Courier'>None</span>, toutes les fenêtres des racinesconcernées par l'acquisition recevront des événements <span style='font-family:Courier'>FocusIn</span> (et toutes les fenêtres concernées par la perte desévénements de type <span style='font-family:Courier'>FocusOut</span>) avec <spanstyle='font-family:Courier'>detail</span> à <span style='font-family:Courier'>NotifyPointerRoot</span>ou <span style='font-family:Courier'>NotifyDetailNone</span>. Dans ce cas, lesfenêtres origine et destination auront un champ <span style='font-family:Courier'>detail</span>à <span style='font-family:Courier'>NotifyNonlinear</span>, <spanstyle='font-family:Courier'>NotifyPointerRoot</span> ou <span style='font-family:Courier'>NotifyDetailNone,</span> selon la valeur passée en argument à larequête de saisie. </p><p class=MsoNormal style='mso-pagination:none;page-break-after:avoid'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none;page-break-after:avoid'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Siune fenêtre donnée perd le focus, le champ <span style='font-family:Courier'>detail</span>sera<span style="mso-spacerun: yes">&nbsp; </span><span style='font-family:Courier'>NotifyNonlinearVirtual</span><span style="mso-spacerun: yes">&nbsp;</span>pour toutes les fenêtres intermédiaires entre cette fenêtre et saracine. En outre toutes les fenêtres (de toutes les racines) recevront unévénement de détail <span style='font-family:Courier'>NotifyPointerRoot</span>ou <span style='font-family:Courier'>NotifyDetailNone</span><i> </i><spanstyle='font-style:normal'>indiquant l'acquisition (ou la perte) générale defocus. On voit bien dans ce cas qu'une même fenêtre peut recevoir plusieursévénements de type </span><span style='font-family:Courier'>FocusIn</span> et <spanstyle='font-family:Courier'>FocusOut</span> correspondant à un même changementde focus. Une fenêtre peut en effet être avertie à la fois de la perte de focusrelative à la perte de focus d'une fenêtre, et de l'acquisition de focus,relative à l'acquisition générale, par passage de <span style='font-family:Courier'>PointerRoot</span> <!--[if supportFields]><span style='font-family:Courier;display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;PointerRoot</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->àla requête de saisie.</p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h2 style='mso-pagination:lines-together'>5.7.&nbsp;La saisie de texte</h2><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;textes&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Focus&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Evénement:clavier&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Saisie&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>Dans cette section, nous allonscommenter les différents événements qui concernent le clavier et donner unaperçu de la saisie de texte au clavier (par des programmes ignorant la notionde <i>localité</i><span style='font-style:normal'> ou antérieurs à la </span><i>Release</i><spanstyle='font-style:normal'> 5</span><a style='mso-footnote-id:ftn15'href="#_ftn15" name="_ftnref15" title=""><span class=MsoFootnoteReference><spanstyle='mso-special-character:footnote'><![if !supportFootnotes]>[15]<![endif]></span></span></a>).<!--[if supportFields]><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE <span style="mso-spacerun:yes">&nbsp;</span>&quot;Dispositif d’entrée:monopolisation\;.i.Focus\;.i.Evénement:clavier\;.i.Saisie\;&#9;Dans cette section, nous allons commenter les différents événements quiconcernent le clavier et donner un aperçu de la saisie de texte au clavier (pardes programmes ignorant la notion de <i>localité</i><span style='font-style:normal'> ou antérieurs à la </span><i>Release</i><span style='font-style:normal'>5</span><a style='mso-footnote-id:ftn16' href="#_ftn16" name="_ftnref16"title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[16]<![endif]></span></span></a>). &quot; <![endif]--><!--[if supportFields]><spanstyle='mso-element:field-end'></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Clavier:saisie des événements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='display:none'><o:p></o:p></span></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h3 style='mso-pagination:none'>L'événement KeymapNotify</h3><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>L’événementde type <span style='font-family:Courier'>KeymapNotify</span> permet deconnaître l’état du clavier <i>avant</i><span style='font-style:normal'> d’enrecevoir les entrées.</span><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-begin'></span> XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;touches&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=AttrLarger style='mso-pagination:none'><span style='font-family:Courier'>KeymapNotify</span><!--[if supportFields]><span style='display:none'><span style='mso-element:field-begin'></span><span style="mso-spacerun: yes">&nbsp;</span>XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;KeymapNotify</span><span style='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Cetévénement est émis juste après un <span style='font-family:Courier'>EnterNotify</span>ou un <span style='font-family:Courier'>FocusIn</span><i> </i><spanstyle='font-style:normal'><span style="mso-spacerun: yes">&nbsp;</span>car cesdeux types d’événements sont susceptibles d’indiquer à l’application qu’elle varecevoir des entrées. Il donne l'état du clavier et sera utilisé par lesapplications qui souhaitent savoir dans quel état se trouvait le clavier avantd'interpréter des entrées. </span></p><p class=AttrLarger style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Enfait l'événement <span style='font-family:Courier'>KeymapNotify</span> estrarement utilisé, car l'état des modifieurs est déjà fourni par les événements <spanstyle='font-family:Courier'>EnterNotify</span> et <span style='font-family:Courier'>FocusIn</span>, qui sont émis juste avant.<span style="mso-spacerun:yes">&nbsp; </span>Le type de cet événement est <span style='font-family:Courier'>XKeymapEvent</span>.On pourra le sélectionner avec le masque <span style='font-family:Courier'>KeymapStateMask</span>et on accédera à la structure associée dans une union <span style='font-family:Courier'>XEvent</span> via le champs <span style='font-family:Courier'>xkeymap</span>.Son principal champ est le champ <span style='font-family:Courier'>key_vector</span>qui donne un vecteur d’état des touches sous la forme d’un masque de32&nbsp;caractères (256 bits). Le <span style='font-family:Courier'>keycode</span>d’une touche donnée est le rang du bit signifiant dans le vecteur des touches.La fonction </p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=fonction style='mso-pagination:none'><span style='font-family:Courier'>XQueryKeymap</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;XQueryKeymap&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]-->(dpy, tableau)</p><p class=fonction style='mso-pagination:none'>Display*<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>dpy;</p><p class=fonction style='mso-pagination:none'>char <span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>tableau[32] ;</p><p class=fonction style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'>permet également de lire l’étatdu clavier. Cependant, elle est plus coûteuse, (comme toutes les fonctions en <spanstyle='font-family:Courier'>XQuery</span>), qu’un appel à <spanstyle='font-family:Courier'>XNextEvent</span> - d'où l'intérêt de cetévénement.</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h3 style='mso-pagination:none'>Les événements KeyPress et KeyRelease</h3><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Clavier:saisie des événements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Onrécupère les entrées tapées au clavier au moyen des événements <spanstyle='font-family:Courier'>KeyPress</span> et <span style='font-family:Courier'>KeyRelease</span>.</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><table border=0 cellspacing=0 cellpadding=0 style='border-collapse:collapse; mso-table-layout-alt:fixed;mso-padding-alt:0cm 4.0pt 0cm 4.0pt'> <tr>  <td width=153 valign=top style='width:153.0pt;padding:0cm 4.0pt 0cm 4.0pt'>  <p class=AttrLarger style='margin-left:141.0pt;text-indent:-103.0pt;  mso-pagination:none'><span style='font-family:Courier'>KeyPress</span><!--[if supportFields]><span  style='font-family:Courier'><span style='mso-element:field-begin'></span> XE <span  style="mso-spacerun: yes">&nbsp;</span>&quot;KeyPress&quot; </span><![endif]--><!--[if supportFields]><span  style='font-family:Courier'><span style='mso-element:field-end'></span></span><![endif]--></p>  <p class=AttrLarger style='margin-left:141.0pt;text-indent:-103.0pt;  mso-pagination:none'><span style='font-family:Courier'>KeyRelease</span><!--[if supportFields]><span  style='font-family:Courier'><span style='mso-element:field-begin'></span> XE <span  style="mso-spacerun: yes">&nbsp;</span>&quot;KeyRelease&quot; </span><![endif]--><!--[if supportFields]><span  style='font-family:Courier'><span style='mso-element:field-end'></span></span><![endif]--></p>  </td>  <td width=207 valign=top style='width:207.0pt;padding:0cm 4.0pt 0cm 4.0pt'>  <p class=AttrLarger style='margin-top:0cm;margin-right:4.0pt;margin-bottom:  0cm;margin-left:0cm;margin-bottom:.0001pt;text-indent:0cm;mso-pagination:  none'>Ces événements traduisent le fait qu’une touche du clavier a été  enfoncée ou relâchée. Ces événements sont de type <span style='font-family:  Courier'>XKeyEvent</span> <!--[if supportFields]><span style='display:none'><span  style='mso-element:field-begin'></span><span style="mso-spacerun:  yes">&nbsp;</span>XE </span><span style='font-family:Courier'><span  style="mso-spacerun: yes">&nbsp;</span>&quot;XKeyEvent</span> <span  style='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><span  style='display:none'><span style='mso-element:field-end'></span></span><![endif]-->et  on y accède dans l’union <span style='font-family:Courier'>XEvent</span> par  le membre <span style='font-family:Courier'>xkey</span>.</p>  </td> </tr></table><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;textes&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lastructure associée contient principa&shy;lement le code émis par la touche(champ <span style='font-family:Courier'>key&shy;code</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;key&shy;code&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]-->).<spanstyle="mso-spacerun: yes">&nbsp; </span>Pour recevoir ces événements, il fautbénéficier du focus du clavier et avoir sélectionné ces événements par <spanstyle='font-family:Courier'>KeyPressMask</span> (ou <span style='font-family:Courier'>KeyReleaseMask</span>). Les autres champs de la structure de type <spanstyle='font-family:Courier'>XKeyEvent</span> sont les mêmes que ceux que nousavons déjà détaillés pour les événements souris (cf. figure 5.2). On pourradonc accéder aux champs <span style='font-family:Courier'>window</span>, <spanstyle='font-family:Courier'>root</span>, <span style='font-family:Courier'>subwindow</span>,<span style='font-family:Courier'>x,</span> <span style='font-family:Courier'>y</span>,<span style='font-family:Courier'>x_root</span>, <span style='font-family:Courier'>y_root</span>,<span style='font-family:Courier'>time</span>, <span style='font-family:Courier'>state</span>,<span style='font-family:Courier'>same_screen</span>, etc. </p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;touches&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><!--[if gte vml 1]><v:shape id="_x0000_i1029" type="#_x0000_t75" style='width:40pt;height:24pt'> <v:imagedata src="05_fichiers/image001.gif" o:althref="05_fichiers/image012.pct"  o:title=""/></v:shape><![endif]--><![if !vml]><img width=40 height=24src="05_fichiers/image013.png" v:shapes="_x0000_i1029"><![endif]>Remarques :</p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>1.&nbsp;L’événement<span style='font-family:Courier'>KeyRelease</span> <!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;KeyRelease</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->n’existepas sur certaines machines bas de gamme. On évitera donc d'en faire usage sil’on veut que l'application soit portable sur ces machines.</p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>2.Il ne peut y avoir de saisie du clavier entre un événement de type <spanstyle='font-family:Courier'>KeyPress</span> <!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;KeyPress</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->etun événement de type <span style='font-family:Courier'>KeyRelease</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;KeyRelease&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]-->.</p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lechamp <span style='font-family:Courier'>keycode</span> peut être assimilé à uncode physique directement émis par le clavier de par la position de la touche.On ne peut pas modifier les liens entre les touches et les <spanstyle='font-family:Courier'>keycode</span>. Cependant, les claviers étant loind'être standardisés, le système X a prévu un second niveau de codage permettantd'associer au code émis par la touche, et compte tenu de l'état du clavier, uncode symbolique ou <span style='font-family:Courier'>keysym</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;keysym&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->.C'est ce code symbolique qui va être récupéré et interprété par lesapplications grâce à la fonction <span style='font-family:Courier'>XLookupString</span>.</p><p class=MsoNormal style='line-height:14.0pt;mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='line-height:14.0pt;mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h3 style='mso-pagination:none'>La fonction XLookupString</h3><p class=MsoNormal style='line-height:14.0pt;mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Clavier:saisie des événements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Onn’interprète jamais directement le code émis par une touche à partir du <spanstyle='font-family:Courier'>keycode</span>. C’est un code symbolique <spanstyle='font-family:Courier'>keysym,</span> récupéré par une fonction en <spanstyle='font-family:Courier'>XLookupString</span><a style='mso-footnote-id:ftn17'href="#_ftn17" name="_ftnref17" title=""><span class=MsoFootnoteReference><spanstyle='mso-special-character:footnote'><![if !supportFootnotes]>[17]<![endif]></span></span></a>qui permet véritablement d’interpréter le code émis par une touche.</p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;récupération des entrées&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;codage des touches&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;textes&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;touche&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='line-height:14.0pt;mso-pagination:none'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lecode symbolique <span style='font-family:Courier'>keysym</span> est un entierdécrit par des constantes définies dans <span style='display:none'>.h;</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;fichiers à inclure:keysym.h&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->lefichier <span style='font-family:Courier'>&lt;X11/keysym.h&gt;</span>. Lesconstantes symboliques présentent l'avantage de permettre d'interpréterdirectement des associations de touches physiques avec des modifieurs. Parexemple, le code symbolique de la touche &quot;a&quot; enfoncée simultanémentavec le modifieur <i>Shift</i><span style='font-style:normal'> </span><i>gauche</i><spanstyle='font-style:normal'> sur le clavier fournit le code symbolique </span><spanstyle='font-family:Courier'>XK_Shift_A.</span><span style="mso-spacerun:yes">&nbsp; </span>Pour ces associations, le serveur utilise des tables decodes symboliques associés à un <span style='font-family:Courier'>keycode</span>donné en association avec des modifieurs<a style='mso-footnote-id:ftn18'href="#_ftn18" name="_ftnref18" title=""><span class=MsoFootnoteReference><spanstyle='mso-special-character:footnote'><![if !supportFootnotes]>[18]<![endif]></span></span></a>.</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style="mso-spacerun:yes">&nbsp;</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>L'événementde type <span style='font-family:Courier'>KeyPress</span> récupéré par uneapplication ne comporte que le champ <span style='font-family:Courier'>keycode</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;keycode&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->.On récupère le code symbolique <span style='font-family:Courier'>keysym</span>qui lui est associé et sa traduction (si elle existe) sous forme de chaîne decaractères <span style='font-family:Courier'>ASCII</span> grâce à la fonction<astyle='mso-footnote-id:ftn19' href="#_ftn19" name="_ftnref19" title=""><spanclass=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[19]<![endif]></span></span></a><span style='font-family:Courier'>XLookupString</span>.</p><p class=fonction style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=fonction style='mso-pagination:none'>int <span style='font-family:Courier'>XLookupString</span><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-begin'></span> XE </span><span style='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;XLookupString&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]--><spanstyle="mso-spacerun: yes">&nbsp;</span>( &amp;ev, buffer, n_buf,&amp;keysym_return, &amp;status_in_out )</p><p class=fonction style='mso-pagination:none'>XEvent<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>ev;<span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*doit être de type XKeyEvent */<span style='mso-tab-count:1'>&nbsp; </span></p><p class=fonction style='mso-pagination:none'>char<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>buffer[] ;</p><p class=fonction style='mso-pagination:none'>int<span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>n_buf;</p><p class=fonction style='mso-pagination:none'>KeySym<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>keysym_return;</p><p class=fonction style='mso-pagination:none'>XComposeStatus<spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>status_in_out;</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none;page-break-after:avoid'><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>Pour utiliser <span style='font-family:Courier'>XLookupString</span>, il faut inclure le fichier <spanstyle='font-family:Courier'>&lt;X11/Xutil.h&gt;</span>. Cette fonction permetde récupérer, dans un tableau de caractères <i>buffer</i><spanstyle='font-style:normal'> (alloué par l’application qui en fournit l’adresseet la taille dans </span><i>n_buf</i><span style='font-style:normal'>), latraduction du code émis par la touche sous la forme d'une chaîne de caractères </span><spanstyle='font-family:Courier'>ASCII</span>, ainsi que la valeur du codesymbolique <i>keysym</i><span style='font-style:normal'> associé, compte tenude l'état des modifieurs Shift, Lock, Control et Meta (le code émis par latouche étant récupéré par le serveur grâce au champ </span><spanstyle='font-family:Courier'>keycode</span> de l’événement).<spanstyle='display:none'>.h;</span><!--[if supportFields]><span style='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;fichiers à inclure:Xutil.h&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle="mso-spacerun: yes">&nbsp;</span>L'événement dont on aura passé l’adresseest supposé être de type <span style='font-family:Courier'>XKeyEvent</span>. <spanstyle='font-family:Courier'>XLookupString</span> retourne le nombre decaractères <span style='font-family:Courier'>ASCII</span> placés dans lebuffer. On ne récupère généralement qu'un seul caractère à la fois, mais ilarrive qu'une touche ait été réassociée à une chaîne de plusieurs caractères,suite à un appel à <span style='font-family:Courier'>XRebindKeysym</span>.</p><p class=MsoNormal style='mso-pagination:none;page-break-after:avoid'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Clavier:saisie des événements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;textes&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Onpeut en effet modifier les chaînes de caractères <span style='font-family:Courier'>ASCII</span>associées par <span style='font-family:Courier'>XLookupString</span> (dans lebuffer) au code symbolique <span style='font-family:Courier'>keysym</span>grâce à la fonction <span style='font-family:Courier'>XRebindKeysym</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;XRebindKeysym&quot;</span><![endif]--><!--[if supportFields]><span style='display:none'><spanstyle='mso-element:field-end'></span></span><![endif]-->. Cette redéfinitionest locale au client. Elle ne modifie que les réponses aux futurs appels à <spanstyle='font-family:Courier'>XLookupString</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;XLookupString&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle="mso-spacerun: yes">&nbsp;</span>émis par le client (cf. figure 5.5.).<!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;touches&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal align=center style='text-align:center;mso-pagination:lines-together;page-break-after:avoid'><!--[if gte vml 1]><v:shape id="_x0000_i1030" type="#_x0000_t75" style='width:233pt;height:148pt'> <v:imagedata src="05_fichiers/image014.gif" o:althref="05_fichiers/image015.pct"  o:title=""/></v:shape><![endif]--><![if !vml]><img width=233 height=148src="05_fichiers/image016.png" v:shapes="_x0000_i1030"><![endif]></p><p class=MsoNormal align=center style='text-align:center;mso-pagination:lines-together;page-break-after:avoid'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal align=center style='text-align:center;mso-pagination:lines-together;page-break-after:avoid'>fig. 5.5<i>. Le codage des touches du clavier <o:p></o:p></i></p><p class=MsoNormal align=center style='text-align:center;mso-pagination:none'><i>retournépar XLookupString</i></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h3 style='mso-pagination:none'>L'événement MappingNotify</h3><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Clavier:saisie des événements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Onpeut aussi dans certaines implantations modifier les liens entre les <spanstyle='font-family:Courier'>keycode</span> et les <span style='font-family:Courier'>keysym</span>. Mais cela n'est guère recommandé, car, cette fois, lamodification ne sera plus locale au client. Si on modifie ces liens, les autresclients recevront des événements de type <span style='font-family:Courier'>MappingNotify</span><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-begin'></span>XE </span><span style='font-family:Courier'><span style="mso-spacerun:yes">&nbsp;</span>&quot;MappingNotify&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->.</p><p class=AttrLarger style='mso-pagination:none'><span style='font-family:Courier'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p><p class=AttrLarger style='mso-pagination:none'><span style='font-family:Courier'>MappingNotify</span><!--[if supportFields]><span style='font-family:Courier;display:none'><spanstyle='mso-element:field-begin'></span><span style="mso-spacerun:yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;MappingNotify</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Cetévénement informe qu'un changement d'association a été effectué par un autreclient sur les ressources concernant le clavier ou la souris. Ce typed’événement n’a pas besoin d’être sélectionné pour être reçu. </p><p class=MsoNormal style='mso-pagination:none;page-break-after:avoid'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Unévénement de type MappingNotify annoncera par exemple&nbsp;:</p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>•&nbsp;unappel à <span style='font-family:Courier'>XChangeKeyboardMapping</span> <!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;XChangeKeyboardMapping</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->(quimodifie les liens entre touches physiques et touches symboliques),</p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>•&nbsp;unappel à <span style='font-family:Courier'>XSetModifierMapping</span> <!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;XSetModifierMapping</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->(quimodifie les liens entre touches modifieurs et modifieurs logiques),<spanstyle="mso-spacerun: yes">&nbsp; </span></p><p class=MsoNormal style='mso-pagination:none'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>•&nbsp;ouencore un appel à <span style='font-family:Courier'>XSetPointerMapping</span> <!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;XSetPointerMapping</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->(quimodifie les liens entre les boutons physiques et les bouton logiques de lasouris). </p><p class=MsoNormal style='mso-pagination:none'>La réaction normale à unchangement sur les touches est un appel à <span style='font-family:Courier'>XRefreshKeyboardMapping</span><!--[if supportFields]><span style='display:none'><span style='mso-element:field-begin'></span><span style="mso-spacerun: yes">&nbsp;</span>XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;XRefreshKeyboardMapping</span><span style='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->(testerle champ <span style='font-family:Courier'>request</span> de l'événement) pourremettre à jour les tables locales.<!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;touches&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;clés:voir touches&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><span style='font-size:10.0pt;font-family:Times;mso-ansi-language:FR;mso-fareast-language:FR'><br clear=ALL style='mso-special-character:line-break;page-break-before:always'></span><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><div style='border:dotted windowtext .75pt;padding:6.0pt 6.0pt 6.0pt 6.0pt'><p class=resume style='mso-pagination:none;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><span style='font-size:12.0pt'><b><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></b></span></p><p class=resume style='mso-pagination:none;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><span style='font-size:12.0pt'><b><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lesfonctions importantes<o:p></o:p></b></span></p><p class=resume style='mso-pagination:none;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=resume style='mso-pagination:none;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Bool<span style="mso-spacerun:yes">&nbsp; </span><span style='font-family:Courier'>XQueryPointer </span>(dpy,<span style="mso-spacerun: yes">&nbsp; </span>win,<spanstyle="mso-spacerun: yes">&nbsp;&nbsp; </span>&amp;root_return,<spanstyle="mso-spacerun: yes">&nbsp;&nbsp; </span>&amp;child_return,</p><p class=resume style='mso-pagination:none;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><spanstyle="mso-spacerun: yes">&nbsp;</span>&amp;root_x, &amp;root_y, &amp;win_x,&amp;win_y, &amp;state)</p><p class=resume style='mso-pagination:none;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=resume style='mso-pagination:none;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>int <span style='font-family:Courier'>XLookupString </span>( &amp;ev, buffer, n_buf, &amp;keysym_return, </p><p class=resume style='mso-pagination:none;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&amp;status_in_out)</p><p class=resume style='mso-pagination:none;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=resume style='mso-pagination:none;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=resume style='mso-pagination:none;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Des événements importants sonttraités dans ce chapitre : <span style='font-family:Courier'>ButtonPress</span>,<span style='font-family:Courier'>ButtonRelease</span>, <span style='font-family:Courier'>MotionNotify</span>, <span style='font-family:Courier'>KeyPress</span>,<span style='font-family:Courier'>EnterNotify</span>, <span style='font-family:Courier'>LeaveNotify</span>, <span style='font-family:Courier'>FocusIn</span>et <span style='font-family:Courier'>FocusOut</span>.</p><p class=resume style='mso-pagination:none;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=fonction style='mso-pagination:none;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>La notion de saisie d'undispositif d'entrée est une notion importante puisqu'une saisie du pointeur estautomatiquement déclenchée par la réception d'un événement de type <spanstyle='font-family:Courier'>ButtonPress</span>. On retiendra l'importance desmasques de sélection d'événements souris <span style='font-family:Courier'>OwnerGrabButtonMask</span>et <span style='font-family:Courier'>PointerMotionHintMask</span>, et l'exemplede programmation de la section 5.3. On s'attardera également sur les sections5.5. à 5.7. pour savoir quand et comment saisir les entrées du clavier.</p><p class=fonction style='mso-pagination:none;border:none;mso-border-alt:dotted windowtext .75pt;padding:0cm;mso-padding-alt:6.0pt 6.0pt 6.0pt 6.0pt'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p></div><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><h2 style='mso-pagination:lines-together'>Exercices sur les événementsclavier/souris</h2><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Exercices:événements souris&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='display:none'><o:p></o:p></span></p><p class=MsoNormal style='mso-pagination:none'><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span><spanstyle="mso-spacerun: yes">&nbsp;</span>XE </span><span style="mso-spacerun:yes">&nbsp;</span>&quot;Exercices:sur les événements&quot; <![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]--><spanstyle='display:none'><o:p></o:p></span></p><p class=MsoNormal style='mso-pagination:none'>Les corrigés de ces exercicesfigurent pages 292 et suivantes.</p><p class=MsoNormal style='mso-pagination:none'><b><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></b></p><p class=MsoNormal style='mso-pagination:none'><b>Exercice 8</b><spanstyle='font-weight:normal'>: (Réception des caractères lus dans une fenêtre X)</span></p><p class=MsoNormal style='mso-pagination:none'>Imprimer (sur la console delancement du programme), les caractères frappés au clavier dans une fenêtreX,<span style="mso-spacerun: yes">&nbsp; </span>par exemple avec la commandefprintf(stderr, ...).</p><p class=MsoNormal style='mso-pagination:none'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p><p class=MsoNormal style='mso-pagination:none'><b>Exercice 9 </b><spanstyle='font-weight:normal'>: (Etude des événements EnterNotify et LeaveNotify)</span></p><p class=MsoNormal style='mso-pagination:none'>Créer deux fenêtres ayantchacune une sous-fenêtre et les placer à l'aide du window manager selon ladisposition de la figure 5.5. Faire varier les masques de sélection desévénements boutons pour avoir (ou non) saisie de la souris ; afficher leschamps mode et détail des événements d'entrée/sortie des fenêtres.</p></div><div style='mso-element:footnote-list'><![if !supportFootnotes]><br clear=all><hr align=left size=1 width="33%"><![endif]><div style='mso-element:footnote' id=ftn1><p class=MsoFootnoteText><a style='mso-footnote-id:ftn1' href="#_ftnref1"name="_ftn1" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[1]<![endif]></span></span></a> Cettefenêtre pourra être désignée comme argument de certaines fonctions par laconstante <span style='font-family:Courier'>InputFocus</span>. </p></div><div style='mso-element:footnote' id=ftn2><p class=MsoFootnoteText><a style='mso-footnote-id:ftn2' href="#_ftnref2"name="_ftn2" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[2]<![endif]></span></span></a><spanstyle="mso-spacerun: yes">&nbsp; </span>Ce masque s'appelle <spanstyle='font-family:Courier'>OwnerGrabButtonMask</span>, de <i>Owner</i><spanstyle='font-style:normal'>, propriétaire et </span><i>Grab</i><spanstyle='font-style:normal'>, saisie, pour indiquer que le serveur ne libère lasouris que pour les fenêtres de l'application propriétaire de la saisie.</span></p></div><div style='mso-element:footnote' id=ftn3><p class=MsoFootnoteText><a style='mso-footnote-id:ftn3' href="#_ftnref3"name="_ftn3" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[3]<![endif]></span></span></a><spanstyle="mso-spacerun: yes">&nbsp; </span>Ici via le membre <spanstyle='font-family:Courier'>xbutton</span> de l'union <span style='font-family:Courier'>XEvent</span>. Par exemple, on écrira </p><p class=MsoFootnoteText><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if(ev.xbutton.subwindow == FenetreMenu) etc...</p></div><div style='mso-element:footnote' id=ftn4><p class=MsoFootnoteText><a style='mso-footnote-id:ftn4' href="#_ftnref4"name="_ftn4" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[4]<![endif]></span></span></a> Celasignifie que l'on a intérêt à relancer périodiquement le serveur si l'on veutfaire usage de cette information.</p></div><div style='mso-element:footnote' id=ftn5><p class=MsoFootnoteText><a style='mso-footnote-id:ftn5' href="#_ftnref5"name="_ftn5" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[5]<![endif]></span></span></a> Lesmodifieurs sont les touches qui produisent une modification de l'interprétationdes autres touches enfoncées simultanément<span style="mso-spacerun:yes">&nbsp; </span>avec elles. Par exemple Shift, Alternate, Meta, etc.</p></div><div style='mso-element:footnote' id=ftn6><p class=MsoFootnoteText><a style='mso-footnote-id:ftn6' href="#_ftnref6"name="_ftn6" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[6]<![endif]></span></span></a> Il y a deuxexceptions <b>: </b><span style='display:none;font-weight:normal'>;</span>si lebouton change d'état ou si la souris sort de la fenêtre. Mais dans ces deuxcas, il faudra qu'un nouveau mouvement se produise et que l'application soitencore en mesure de recevoir cet événement pour qu'elle le récupère.</p></div><div style='mso-element:footnote' id=ftn7><p class=MsoFootnoteText><a style='mso-footnote-id:ftn7' href="#_ftnref7"name="_ftn7" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[7]<![endif]></span></span></a> Si l'onsouhaite récupérer tous les événements, on pourra faire appel sur certainesmachines à une mémoire appelée <i>motion history buffer</i><spanstyle='font-style:normal'>, permettant de récupérer </span><i>simultanément </i><spanstyle='font-style:normal'>tous les événements de mouvements qui ont suivil’unique mouvement envoyé spontanément par le serveur. Pour savoir si leserveur possède une telle capacité, on testera la valeur de retour de lafonction</span></p><p class=MsoFootnoteText><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>int<span style='font-family:Courier'>XDisplayMotionBufferSize</span><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-begin'></span> XE </span><spanstyle='font-family:Courier'><span style="mso-spacerun: yes">&nbsp;</span>&quot;XDisplayMotionBufferSize</span><span style='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='display:none'><span style='mso-element:field-end'></span></span><![endif]-->(dpy)</p><p class=MsoFootnoteText>qui doit être strictement positive. On procède alors àune sélection de mouvements modulée par <span style='font-family:Courier'>PointerMotionHintMask</span><!--[if supportFields]><span style='font-family:Courier;display:none'><spanstyle='mso-element:field-begin'></span><span style="mso-spacerun:yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;PointerMotionHintMask</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->maison appelle cette fois <span style='font-family:Courier'>XGetMotionEvents</span><!--[if supportFields]><span style='font-family:Courier;display:none'><spanstyle='mso-element:field-begin'></span><span style="mso-spacerun:yes">&nbsp;</span>XE </span><span style='font-family:Courier'><spanstyle="mso-spacerun: yes">&nbsp;</span>&quot;XGetMotionEvents</span> <spanstyle='font-family:Courier'>&quot; </span><![endif]--><!--[if supportFields]><spanstyle='font-family:Courier;display:none'><span style='mso-element:field-end'></span></span><![endif]-->àl’intérieur de la boucle d’événements.</p></div><div style='mso-element:footnote' id=ftn8><p class=MsoFootnoteText><a style='mso-footnote-id:ftn8' href="#_ftnref8"name="_ftn8" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[8]<![endif]></span></span></a> Sous réserveque la tirette n'ait pas sélectionné ni bloqué l'événement. Récupérer lesévénements sur la mère n'entraine d'ailleurs aucune perte d'information car onpeut tester si l'événement provient de la tirette ou de la barre grâce au champ<span style='font-family:Courier'>subwindow</span>.</p></div><div style='mso-element:footnote' id=ftn9><p class=MsoFootnoteText><a style='mso-footnote-id:ftn9' href="#_ftnref9"name="_ftn9" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[9]<![endif]></span></span></a> Question quise pose chaque fois que l'on sélectionne un événement de type <spanstyle='font-family:Courier'>ButtonPress.</span></p></div><div style='mso-element:footnote' id=ftn10><p class=MsoFootnoteText><a style='mso-footnote-id:ftn10' href="#_ftnref10"name="_ftn10" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[10]<![endif]></span></span></a> Danscertains cas, il peut sembler nécessaire de monopoliser le serveur lui-même,pour empêcher, par exemple, qu'un dessin extérieur ne vienne modifier l'état del'écran entre deux requêtes. Dans ces cas très particuliers, (que lesconventions entre clients recommandent par ailleurs d'exclure), les programmesferont appel à la fonction <span style='font-family:Courier'>XGrabServer</span>.</p></div><div style='mso-element:footnote' id=ftn11><p class=MsoFootnoteText><a style='mso-footnote-id:ftn11' href="#_ftnref11"name="_ftn11" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[11]<![endif]></span></span></a> En outre,si la fenêtre accaparante n'a pas sélectionné ces événements souris, cesderniers sont perdus.</p></div><div style='mso-element:footnote' id=ftn12><p class=MsoFootnoteText><a style='mso-footnote-id:ftn12' href="#_ftnref12"name="_ftn12" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[12]<![endif]></span></span></a> Cependant,les conventions entre clients recommandent de ne pas utiliser cette fonction.</p></div><div style='mso-element:footnote' id=ftn13><p class=MsoFootnoteText><a style='mso-footnote-id:ftn13' href="#_ftnref13"name="_ftn13" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[13]<![endif]></span></span></a> Lesrequêtes précédentes peuvent déclencher des saisies actives ou passives selonla valeur de l'argument <i>time</i><span style='font-style:normal'> . </span></p></div><div style='mso-element:footnote' id=ftn14><p class=MsoFootnoteText><a style='mso-footnote-id:ftn14' href="#_ftnref14"name="_ftn14" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[14]<![endif]></span></span></a> Qui empêchela saisie d'être active pour les fenêtres de l'application mais ne supprime pasla saisie.</p></div><div style='mso-element:footnote' id=ftn15><p class=MsoFootnoteText><a style='mso-footnote-id:ftn15' href="#_ftnref15"name="_ftn15" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[15]<![endif]></span></span></a> A partir dela <i>Release</i><span style='font-style:normal'> 5, on dispose d'un outil trèspuissant, les méthodes de lecture d'entrée, qui permet de s'adapter à la languede l'utilisateur. Ces méthodes de lecture utilisent éventuellement de largesdictionnaires et des algorithmes complexes pour interpréter les chaînes decaractères tapées au clavier. Elles ont été définies dans le but de permettrel'internationalisation des programmes c'est-à-dire la portabilité desprogrammes indépendamment des langues utilisées (cf. chapitre 8).</span></p></div><div style='mso-element:footnote' id=ftn16><p class=MsoFootnoteText><a style='mso-footnote-id:ftn16' href="#_ftnref16"name="_ftn16" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[16]<![endif]></span></span></a> A partir dela <i>Release</i><span style='font-style:normal'> 5, on dispose d'un outil trèspuissant, les méthodes de lecture d'entrée, qui permet de s'adapter à la languede l'utilisateur. Ces méthodes de lecture utilisent éventuellement de largesdictionnaires et des algorithmes complexes pour interpréter les chaînes decaractères tapées au clavier. Elles ont été définies dans le but de permettrel'internationalisation des programmes c'est-à-dire la portabilité desprogrammes indépendamment des langues utilisées (cf. chapitre 8).</span></p></div><div style='mso-element:footnote' id=ftn17><p class=MsoFootnoteText><a style='mso-footnote-id:ftn17' href="#_ftnref17"name="_ftn17" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[17]<![endif]></span></span></a> Dans la <i>Release</i><spanstyle='font-style:normal'> 5 on pourra utiliser les fonctions </span><spanstyle='font-family:Courier'>XwcLookupString</span> ou <span style='font-family:Courier'>XmbLookupString</span> qui interprètent les chaînes relativement à lalocalité courante avec une méthode d'entrée spécifique.</p></div><div style='mso-element:footnote' id=ftn18><p class=MsoFootnoteText><a style='mso-footnote-id:ftn18' href="#_ftnref18"name="_ftn18" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[18]<![endif]></span></span></a> En faitseulement quatre symboles <span style='font-family:Courier'>keysym</span>peuvent être associés dans la <i>Release</i><span style='font-style:normal'> 4à un </span><span style='font-family:Courier'>keycode</span> donné (les règlesd’association standards n’utilisant que les deux premiers groupes). Le premiergroupe est utilisé quand les modifieurs sont tous relâchés et le deuxièmegroupe, quand les modifieurs sont actifs. Si cette question intéresse lelecteur, qu’il se reporte dans la documentation aux fonctions <spanstyle='font-family:Courier'>XGetKeyboardMapping</span> ou <spanstyle='font-family:Courier'>XChangeKeyboardMapping</span>. Cependant, cesfonctions ne sont pas disponibles dans toutes les implantations. Dans la <i>Release</i><spanstyle='font-style:normal'> 5, c'est la méthode d'entrées qui gérera lesassociations de touches et modifieurs.</span></p></div><div style='mso-element:footnote' id=ftn19><p class=MsoFootnoteText><a style='mso-footnote-id:ftn19' href="#_ftnref19"name="_ftn19" title=""><span class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]>[19]<![endif]></span></span></a> <spanstyle='font-family:Courier'>XwcLookupString</span> et <span style='font-family:Courier'>XmbLookupString</span> dans la <i>Release</i><span style='font-style:normal'> 5. </span></p></div></div></body></html>