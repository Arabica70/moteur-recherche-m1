<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2016-10-01 sam. 14:32 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title>Introduction au Traitement Automatique des Langues / TD 5</title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Joseph Le Roux, relu par Antoine Rozenknop" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">Introduction au Traitement Automatique des Langues / TD 5</h1>

<div id="outline-container-orgheadline6" class="outline-2">
<h2 id="orgheadline6"><span class="section-number-2">1</span> Réalisation d'un étiqueteur morpho-syntaxique HMM</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-orgheadline1" class="outline-3">
<h3 id="orgheadline1"><span class="section-number-3">1.1</span> Introduction</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Le but de cet exercice est d'implanter un étiqueteur de séquences HMM.
Vous allez utiliser le corpus "French Treebank", qui se trouve dans
le répertoire <a href="./data"><code>data</code></a>.
</p>

<p>
Le corpus est divisé en 3 fichiers :
</p>
<ul class="org-ul">
<li><code>ftb_1.tagged</code> : le corpus d'entraînement,</li>
<li><code>ftb_2.tagged</code> : le corpus de développement,</li>
<li><code>ftb_3.tagged</code> : le corpus de test.</li>
</ul>

<p>
Dans cet exercice, vous n'utiliserez que les deux premiers fichiers. Les
paramètres des modèles (transition et émission) seront appris sur
le corpus d'entraînement et le modèle appris sera évalué sur le corpus de
développement.
</p>

<p>
Pour réaliser cet étiqueteur, vous modifierez les sources
(répertoire <a href="./src"><code>src</code></a>). Pour lancer l'entraînement et l'évaluation,
vous lancerez depuis ce répertoire la commande suivante :
</p>
<div class="org-src-container">

<pre class="src src-sh">python POSTagger.py
</pre>
</div>
<p>
Les répertoires <code>data</code> et <code>src</code> doivent se trouver dans le même dossier.
</p>
</div>
</div>

<div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2"><span class="section-number-3">1.2</span> Format du French Treebank</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Voici un exemple de phrase étiquetée en étiquettes morphosyntaxiques
extraite du corpus d'entraînement :
</p>

<pre class="example">
Et/CC pourtant/ADV ,/PONCT à/P y/CLO regarder/VINF de_plus_près/ADV ,/PONCT le/DET bilan/NC n'/ADV est/V peut_-_être/ADV pas/ADV aussi/ADV sombre/ADJ ./PONCT
</pre>

<p>
Chaque ligne contient une phrase. Les couples <code>forme/étiquette</code>
sont séparés par des espaces. 
</p>

<p>
Les objets de la classe <code>Word.py</code> représentent ces couples
<code>forme/étiquette</code>. Ils ont pour attributs <code>form</code> (le mot) et <code>pos</code>
(<i>part-of-speech</i>, étiquette morphosyntaxique)
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #1c86ee;">class</span> <span style="color: #00688b;">Word</span> (<span style="color: #cd6600;">object</span>):
    <span style="color: #8b7355;">""" """</span>
    <span style="color: #1c86ee;">def</span> <span style="color: #cd9b1d;">__init__</span> (<span style="color: #1c86ee;">self</span>, form, pos):
        <span style="color: #8b7355;">""" """</span>
        <span style="color: #1c86ee;">self</span>.form = form
        <span style="color: #1c86ee;">self</span>.pos = pos
</pre>
</div>

<p>
Les objets de la classe <code>Sentence.py</code> ont un attribut de type
liste <code>words</code> qui contient la suite des mots (classe <code>Word</code>) d'une
phrase.
</p>

<p>
La classe <code>Corpus</code> représente un corpus constitué de phrases
(attribut de type liste <code>sentences</code>).
</p>

<p>
Implantez le constructeur de la classe <code>Sentence</code> qui crée une
suite de mots à partir d'une ligne au format French Treebank.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #1c86ee;">class</span> <span style="color: #00688b;">Sentence</span> (<span style="color: #cd6600;">object</span>):
    <span style="color: #1c86ee;">def</span> <span style="color: #cd9b1d;">__init__</span> (<span style="color: #1c86ee;">self</span>, line):
        <span style="color: #8b7355;">"""creates a sentence from a string"""</span>
        <span style="color: #1c86ee;">pass</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3"><span class="section-number-3">1.3</span> Calcul des paramètres HMM</h3>
<div class="outline-text-3" id="text-1-3">
<p>
La classe <code>POSTagger</code> a pour attributs :
</p>
<ul class="org-ul">
<li><code>transmodel</code> le modèle pour les probabilités de transition,</li>
<li><code>emmodel</code> le modèle pour les probabilités d'émission.</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #1c86ee;">class</span> <span style="color: #00688b;">POSTagger</span>(<span style="color: #cd6600;">object</span>) :
 <span style="color: #8b7355;">""" The Pos Tagger class</span>
<span style="color: #8b7355;"> """</span>

 <span style="color: #1c86ee;">def</span> <span style="color: #cd9b1d;">__init__</span>(<span style="color: #1c86ee;">self</span>, transmodel, emmodel) :
     <span style="color: #1c86ee;">self</span>.transmodel = transmodel
     <span style="color: #1c86ee;">self</span>.emmodel = emmodel
</pre>
</div>


<p>
La méthode <code>train</code> de la classe <code>POSTagger</code> appelle les méthodes
<code>train</code> des deux attributs pour calculer les paramètres des deux
modèles. Dans cette exercice, nous utiliserons des modèles
bigrammes pour les transitions et les émissions, avec lissage de
Laplace (lissage +&delta; avec \(0\leq \delta \leq 1\)).
</p>

<ol class="org-ol">
<li>Implantez les méthodes <code>train</code> des deux modèles, qui collectent
simplement les comptes bigrammes et unigrammes du corpus passé en
paramètre.</li>
<li>Implantez la fonction score qui calcule :
<ul class="org-ul">
<li>\(\log(q(v|u))\) pour un bigramme d'étiquettes \(u,v\) du modèle
de transitions</li>
<li>\(\log(q(v|l))\) pour un mot \(v\) et une étiquette \(l\) du modèle
d'émission.</li>
</ul></li>
</ol>
</div>
</div>

<div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4"><span class="section-number-3">1.4</span> Utilisation du modèle</h3>
<div class="outline-text-3" id="text-1-4">
<p>
La méthode <code>tag</code> produit, à partir d'une phrase d'entrée, une
nouvelle phrase où les étiquettes morpho-syntaxiques des mots sont
prédites à partir des paramètres du modèle en utilisant
l'algorithme de Viterbi.
</p>

<ol class="org-ol">
<li>Implantez la méthode <code>viterbi</code> qui renvoie un objet de la classe
<code>Sentence</code>, avec les étiquettes prédites.</li>
<li>Évaluez votre programme, avec différents paramètres &delta;. Vous
devriez arriver à prédire la bonne étiquette dans plus de 94%
des cas.</li>
</ol>
</div>
</div>


<div id="outline-container-orgheadline5" class="outline-3">
<h3 id="orgheadline5"><span class="section-number-3">1.5</span> Pour aller plus loin</h3>
<div class="outline-text-3" id="text-1-5">
<p>
Remplacer le modèle bigramme par un modèle trigramme.
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Joseph Le Roux, relu par Antoine Rozenknop</p>
<p class="date">Created: 2016-10-01 sam. 14:32</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
